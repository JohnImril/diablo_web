(function(){"use strict";function Fr(t,r){return function(){return t.apply(r,arguments)}}const{toString:Ei}=Object.prototype,{getPrototypeOf:mt}=Object,Qe=(t=>r=>{const e=Ei.call(r);return t[e]||(t[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),ie=t=>(t=t.toLowerCase(),r=>Qe(r)===t),et=t=>r=>typeof r===t,{isArray:Ce}=Array,je=et("undefined");function Ri(t){return t!==null&&!je(t)&&t.constructor!==null&&!je(t.constructor)&&Z(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Ur=ie("ArrayBuffer");function Ci(t){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&Ur(t.buffer),r}const Ti=et("string"),Z=et("function"),Br=et("number"),tt=t=>t!==null&&typeof t=="object",ki=t=>t===!0||t===!1,nt=t=>{if(Qe(t)!=="object")return!1;const r=mt(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ji=ie("Date"),Oi=ie("File"),Di=ie("Blob"),Pi=ie("FileList"),Ni=t=>tt(t)&&Z(t.pipe),Ii=t=>{let r;return t&&(typeof FormData=="function"&&t instanceof FormData||Z(t.append)&&((r=Qe(t))==="formdata"||r==="object"&&Z(t.toString)&&t.toString()==="[object FormData]"))},Mi=ie("URLSearchParams"),[Li,Fi,Ui,Bi]=["ReadableStream","Request","Response","Headers"].map(ie),Hi=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Oe(t,r,{allOwnKeys:e=!1}={}){if(t===null||typeof t>"u")return;let a,o;if(typeof t!="object"&&(t=[t]),Ce(t))for(a=0,o=t.length;a<o;a++)r.call(null,t[a],a,t);else{const u=e?Object.getOwnPropertyNames(t):Object.keys(t),_=u.length;let c;for(a=0;a<_;a++)c=u[a],r.call(null,t[c],c,t)}}function Hr(t,r){r=r.toLowerCase();const e=Object.keys(t);let a=e.length,o;for(;a-- >0;)if(o=e[a],r===o.toLowerCase())return o;return null}const ve=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,qr=t=>!je(t)&&t!==ve;function yt(){const{caseless:t}=qr(this)&&this||{},r={},e=(a,o)=>{const u=t&&Hr(r,o)||o;nt(r[u])&&nt(a)?r[u]=yt(r[u],a):nt(a)?r[u]=yt({},a):Ce(a)?r[u]=a.slice():r[u]=a};for(let a=0,o=arguments.length;a<o;a++)arguments[a]&&Oe(arguments[a],e);return r}const qi=(t,r,e,{allOwnKeys:a}={})=>(Oe(r,(o,u)=>{e&&Z(o)?t[u]=Fr(o,e):t[u]=o},{allOwnKeys:a}),t),Wi=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),zi=(t,r,e,a)=>{t.prototype=Object.create(r.prototype,a),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:r.prototype}),e&&Object.assign(t.prototype,e)},Vi=(t,r,e,a)=>{let o,u,_;const c={};if(r=r||{},t==null)return r;do{for(o=Object.getOwnPropertyNames(t),u=o.length;u-- >0;)_=o[u],(!a||a(_,t,r))&&!c[_]&&(r[_]=t[_],c[_]=!0);t=e!==!1&&mt(t)}while(t&&(!e||e(t,r))&&t!==Object.prototype);return r},Ki=(t,r,e)=>{t=String(t),(e===void 0||e>t.length)&&(e=t.length),e-=r.length;const a=t.indexOf(r,e);return a!==-1&&a===e},Ji=t=>{if(!t)return null;if(Ce(t))return t;let r=t.length;if(!Br(r))return null;const e=new Array(r);for(;r-- >0;)e[r]=t[r];return e},$i=(t=>r=>t&&r instanceof t)(typeof Uint8Array<"u"&&mt(Uint8Array)),Gi=(t,r)=>{const a=(t&&t[Symbol.iterator]).call(t);let o;for(;(o=a.next())&&!o.done;){const u=o.value;r.call(t,u[0],u[1])}},Yi=(t,r)=>{let e;const a=[];for(;(e=t.exec(r))!==null;)a.push(e);return a},Xi=ie("HTMLFormElement"),Zi=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,a,o){return a.toUpperCase()+o}),Wr=(({hasOwnProperty:t})=>(r,e)=>t.call(r,e))(Object.prototype),Qi=ie("RegExp"),zr=(t,r)=>{const e=Object.getOwnPropertyDescriptors(t),a={};Oe(e,(o,u)=>{let _;(_=r(o,u,t))!==!1&&(a[u]=_||o)}),Object.defineProperties(t,a)},ea=t=>{zr(t,(r,e)=>{if(Z(t)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const a=t[e];if(Z(a)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},ta=(t,r)=>{const e={},a=o=>{o.forEach(u=>{e[u]=!0})};return Ce(t)?a(t):a(String(t).split(r)),e},na=()=>{},ra=(t,r)=>t!=null&&Number.isFinite(t=+t)?t:r,ht="abcdefghijklmnopqrstuvwxyz",Vr="0123456789",Kr={DIGIT:Vr,ALPHA:ht,ALPHA_DIGIT:ht+ht.toUpperCase()+Vr},ia=(t=16,r=Kr.ALPHA_DIGIT)=>{let e="";const{length:a}=r;for(;t--;)e+=r[Math.random()*a|0];return e};function aa(t){return!!(t&&Z(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const sa=t=>{const r=new Array(10),e=(a,o)=>{if(tt(a)){if(r.indexOf(a)>=0)return;if(!("toJSON"in a)){r[o]=a;const u=Ce(a)?[]:{};return Oe(a,(_,c)=>{const g=e(_,o+1);!je(g)&&(u[c]=g)}),r[o]=void 0,u}}return a};return e(t,0)},oa=ie("AsyncFunction"),ua=t=>t&&(tt(t)||Z(t))&&Z(t.then)&&Z(t.catch),Jr=((t,r)=>t?setImmediate:r?((e,a)=>(ve.addEventListener("message",({source:o,data:u})=>{o===ve&&u===e&&a.length&&a.shift()()},!1),o=>{a.push(o),ve.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",Z(ve.postMessage)),_a=typeof queueMicrotask<"u"?queueMicrotask.bind(ve):typeof process<"u"&&process.nextTick||Jr;var f={isArray:Ce,isArrayBuffer:Ur,isBuffer:Ri,isFormData:Ii,isArrayBufferView:Ci,isString:Ti,isNumber:Br,isBoolean:ki,isObject:tt,isPlainObject:nt,isReadableStream:Li,isRequest:Fi,isResponse:Ui,isHeaders:Bi,isUndefined:je,isDate:ji,isFile:Oi,isBlob:Di,isRegExp:Qi,isFunction:Z,isStream:Ni,isURLSearchParams:Mi,isTypedArray:$i,isFileList:Pi,forEach:Oe,merge:yt,extend:qi,trim:Hi,stripBOM:Wi,inherits:zi,toFlatObject:Vi,kindOf:Qe,kindOfTest:ie,endsWith:Ki,toArray:Ji,forEachEntry:Gi,matchAll:Yi,isHTMLForm:Xi,hasOwnProperty:Wr,hasOwnProp:Wr,reduceDescriptors:zr,freezeMethods:ea,toObjectSet:ta,toCamelCase:Zi,noop:na,toFiniteNumber:ra,findKey:Hr,global:ve,isContextDefined:qr,ALPHABET:Kr,generateString:ia,isSpecCompliantForm:aa,toJSONObject:sa,isAsyncFn:oa,isThenable:ua,setImmediate:Jr,asap:_a};function R(t,r,e,a,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",r&&(this.code=r),e&&(this.config=e),a&&(this.request=a),o&&(this.response=o,this.status=o.status?o.status:null)}f.inherits(R,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:f.toJSONObject(this.config),code:this.code,status:this.status}}});const $r=R.prototype,Gr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Gr[t]={value:t}}),Object.defineProperties(R,Gr),Object.defineProperty($r,"isAxiosError",{value:!0}),R.from=(t,r,e,a,o,u)=>{const _=Object.create($r);return f.toFlatObject(t,_,function(g){return g!==Error.prototype},c=>c!=="isAxiosError"),R.call(_,t.message,r,e,a,o),_.cause=t,_.name=t.name,u&&Object.assign(_,u),_};var la=null;function gt(t){return f.isPlainObject(t)||f.isArray(t)}function Yr(t){return f.endsWith(t,"[]")?t.slice(0,-2):t}function Xr(t,r,e){return t?t.concat(r).map(function(o,u){return o=Yr(o),!e&&u?"["+o+"]":o}).join(e?".":""):r}function ca(t){return f.isArray(t)&&!t.some(gt)}const fa=f.toFlatObject(f,{},null,function(r){return/^is[A-Z]/.test(r)});function rt(t,r,e){if(!f.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,e=f.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,w){return!f.isUndefined(w[E])});const a=e.metaTokens,o=e.visitor||m,u=e.dots,_=e.indexes,g=(e.Blob||typeof Blob<"u"&&Blob)&&f.isSpecCompliantForm(r);if(!f.isFunction(o))throw new TypeError("visitor must be a function");function y(A){if(A===null)return"";if(f.isDate(A))return A.toISOString();if(!g&&f.isBlob(A))throw new R("Blob is not supported. Use a Buffer instead.");return f.isArrayBuffer(A)||f.isTypedArray(A)?g&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function m(A,E,w){let D=A;if(A&&!w&&typeof A=="object"){if(f.endsWith(E,"{}"))E=a?E:E.slice(0,-2),A=JSON.stringify(A);else if(f.isArray(A)&&ca(A)||(f.isFileList(A)||f.endsWith(E,"[]"))&&(D=f.toArray(A)))return E=Yr(E),D.forEach(function(P,I){!(f.isUndefined(P)||P===null)&&r.append(_===!0?Xr([E],I,u):_===null?E:E+"[]",y(P))}),!1}return gt(A)?!0:(r.append(Xr(w,E,u),y(A)),!1)}const v=[],C=Object.assign(fa,{defaultVisitor:m,convertValue:y,isVisitable:gt});function O(A,E){if(!f.isUndefined(A)){if(v.indexOf(A)!==-1)throw Error("Circular reference detected in "+E.join("."));v.push(A),f.forEach(A,function(D,K){(!(f.isUndefined(D)||D===null)&&o.call(r,D,f.isString(K)?K.trim():K,E,C))===!0&&O(D,E?E.concat(K):[K])}),v.pop()}}if(!f.isObject(t))throw new TypeError("data must be an object");return O(t),r}function Zr(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(a){return r[a]})}function vt(t,r){this._pairs=[],t&&rt(t,this,r)}const Qr=vt.prototype;Qr.append=function(r,e){this._pairs.push([r,e])},Qr.toString=function(r){const e=r?function(a){return r.call(this,a,Zr)}:Zr;return this._pairs.map(function(o){return e(o[0])+"="+e(o[1])},"").join("&")};function pa(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ei(t,r,e){if(!r)return t;const a=e&&e.encode||pa,o=e&&e.serialize;let u;if(o?u=o(r,e):u=f.isURLSearchParams(r)?r.toString():new vt(r,e).toString(a),u){const _=t.indexOf("#");_!==-1&&(t=t.slice(0,_)),t+=(t.indexOf("?")===-1?"?":"&")+u}return t}class ti{constructor(){this.handlers=[]}use(r,e,a){return this.handlers.push({fulfilled:r,rejected:e,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){f.forEach(this.handlers,function(a){a!==null&&r(a)})}}var ni={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},da=typeof URLSearchParams<"u"?URLSearchParams:vt,ma=typeof FormData<"u"?FormData:null,ya=typeof Blob<"u"?Blob:null,ha={isBrowser:!0,classes:{URLSearchParams:da,FormData:ma,Blob:ya},protocols:["http","https","file","blob","url","data"]};const wt=typeof window<"u"&&typeof document<"u",bt=typeof navigator=="object"&&navigator||void 0,ga=wt&&(!bt||["ReactNative","NativeScript","NS"].indexOf(bt.product)<0),va=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",wa=wt&&window.location.href||"http://localhost";var ba=Object.freeze({__proto__:null,hasBrowserEnv:wt,hasStandardBrowserEnv:ga,hasStandardBrowserWebWorkerEnv:va,navigator:bt,origin:wa}),Q={...ba,...ha};function Aa(t,r){return rt(t,new Q.classes.URLSearchParams,Object.assign({visitor:function(e,a,o,u){return Q.isNode&&f.isBuffer(e)?(this.append(a,e.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)}},r))}function xa(t){return f.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function Sa(t){const r={},e=Object.keys(t);let a;const o=e.length;let u;for(a=0;a<o;a++)u=e[a],r[u]=t[u];return r}function ri(t){function r(e,a,o,u){let _=e[u++];if(_==="__proto__")return!0;const c=Number.isFinite(+_),g=u>=e.length;return _=!_&&f.isArray(o)?o.length:_,g?(f.hasOwnProp(o,_)?o[_]=[o[_],a]:o[_]=a,!c):((!o[_]||!f.isObject(o[_]))&&(o[_]=[]),r(e,a,o[_],u)&&f.isArray(o[_])&&(o[_]=Sa(o[_])),!c)}if(f.isFormData(t)&&f.isFunction(t.entries)){const e={};return f.forEachEntry(t,(a,o)=>{r(xa(a),o,e,0)}),e}return null}function Ea(t,r,e){if(f.isString(t))try{return(r||JSON.parse)(t),f.trim(t)}catch(a){if(a.name!=="SyntaxError")throw a}return(e||JSON.stringify)(t)}const De={transitional:ni,adapter:["xhr","http","fetch"],transformRequest:[function(r,e){const a=e.getContentType()||"",o=a.indexOf("application/json")>-1,u=f.isObject(r);if(u&&f.isHTMLForm(r)&&(r=new FormData(r)),f.isFormData(r))return o?JSON.stringify(ri(r)):r;if(f.isArrayBuffer(r)||f.isBuffer(r)||f.isStream(r)||f.isFile(r)||f.isBlob(r)||f.isReadableStream(r))return r;if(f.isArrayBufferView(r))return r.buffer;if(f.isURLSearchParams(r))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let c;if(u){if(a.indexOf("application/x-www-form-urlencoded")>-1)return Aa(r,this.formSerializer).toString();if((c=f.isFileList(r))||a.indexOf("multipart/form-data")>-1){const g=this.env&&this.env.FormData;return rt(c?{"files[]":r}:r,g&&new g,this.formSerializer)}}return u||o?(e.setContentType("application/json",!1),Ea(r)):r}],transformResponse:[function(r){const e=this.transitional||De.transitional,a=e&&e.forcedJSONParsing,o=this.responseType==="json";if(f.isResponse(r)||f.isReadableStream(r))return r;if(r&&f.isString(r)&&(a&&!this.responseType||o)){const _=!(e&&e.silentJSONParsing)&&o;try{return JSON.parse(r)}catch(c){if(_)throw c.name==="SyntaxError"?R.from(c,R.ERR_BAD_RESPONSE,this,null,this.response):c}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Q.classes.FormData,Blob:Q.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};f.forEach(["delete","get","head","post","put","patch"],t=>{De.headers[t]={}});const Ra=f.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var Ca=t=>{const r={};let e,a,o;return t&&t.split(`
`).forEach(function(_){o=_.indexOf(":"),e=_.substring(0,o).trim().toLowerCase(),a=_.substring(o+1).trim(),!(!e||r[e]&&Ra[e])&&(e==="set-cookie"?r[e]?r[e].push(a):r[e]=[a]:r[e]=r[e]?r[e]+", "+a:a)}),r};const ii=Symbol("internals");function Pe(t){return t&&String(t).trim().toLowerCase()}function it(t){return t===!1||t==null?t:f.isArray(t)?t.map(it):String(t)}function Ta(t){const r=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=e.exec(t);)r[a[1]]=a[2];return r}const ka=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function At(t,r,e,a,o){if(f.isFunction(a))return a.call(this,r,e);if(o&&(r=e),!!f.isString(r)){if(f.isString(a))return r.indexOf(a)!==-1;if(f.isRegExp(a))return a.test(r)}}function ja(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,e,a)=>e.toUpperCase()+a)}function Oa(t,r){const e=f.toCamelCase(" "+r);["get","set","has"].forEach(a=>{Object.defineProperty(t,a+e,{value:function(o,u,_){return this[a].call(this,r,o,u,_)},configurable:!0})})}class X{constructor(r){r&&this.set(r)}set(r,e,a){const o=this;function u(c,g,y){const m=Pe(g);if(!m)throw new Error("header name must be a non-empty string");const v=f.findKey(o,m);(!v||o[v]===void 0||y===!0||y===void 0&&o[v]!==!1)&&(o[v||g]=it(c))}const _=(c,g)=>f.forEach(c,(y,m)=>u(y,m,g));if(f.isPlainObject(r)||r instanceof this.constructor)_(r,e);else if(f.isString(r)&&(r=r.trim())&&!ka(r))_(Ca(r),e);else if(f.isHeaders(r))for(const[c,g]of r.entries())u(g,c,a);else r!=null&&u(e,r,a);return this}get(r,e){if(r=Pe(r),r){const a=f.findKey(this,r);if(a){const o=this[a];if(!e)return o;if(e===!0)return Ta(o);if(f.isFunction(e))return e.call(this,o,a);if(f.isRegExp(e))return e.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,e){if(r=Pe(r),r){const a=f.findKey(this,r);return!!(a&&this[a]!==void 0&&(!e||At(this,this[a],a,e)))}return!1}delete(r,e){const a=this;let o=!1;function u(_){if(_=Pe(_),_){const c=f.findKey(a,_);c&&(!e||At(a,a[c],c,e))&&(delete a[c],o=!0)}}return f.isArray(r)?r.forEach(u):u(r),o}clear(r){const e=Object.keys(this);let a=e.length,o=!1;for(;a--;){const u=e[a];(!r||At(this,this[u],u,r,!0))&&(delete this[u],o=!0)}return o}normalize(r){const e=this,a={};return f.forEach(this,(o,u)=>{const _=f.findKey(a,u);if(_){e[_]=it(o),delete e[u];return}const c=r?ja(u):String(u).trim();c!==u&&delete e[u],e[c]=it(o),a[c]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const e=Object.create(null);return f.forEach(this,(a,o)=>{a!=null&&a!==!1&&(e[o]=r&&f.isArray(a)?a.join(", "):a)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,e])=>r+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...e){const a=new this(r);return e.forEach(o=>a.set(o)),a}static accessor(r){const a=(this[ii]=this[ii]={accessors:{}}).accessors,o=this.prototype;function u(_){const c=Pe(_);a[c]||(Oa(o,_),a[c]=!0)}return f.isArray(r)?r.forEach(u):u(r),this}}X.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),f.reduceDescriptors(X.prototype,({value:t},r)=>{let e=r[0].toUpperCase()+r.slice(1);return{get:()=>t,set(a){this[e]=a}}}),f.freezeMethods(X);function xt(t,r){const e=this||De,a=r||e,o=X.from(a.headers);let u=a.data;return f.forEach(t,function(c){u=c.call(e,u,o.normalize(),r?r.status:void 0)}),o.normalize(),u}function ai(t){return!!(t&&t.__CANCEL__)}function Te(t,r,e){R.call(this,t??"canceled",R.ERR_CANCELED,r,e),this.name="CanceledError"}f.inherits(Te,R,{__CANCEL__:!0});function si(t,r,e){const a=e.config.validateStatus;!e.status||!a||a(e.status)?t(e):r(new R("Request failed with status code "+e.status,[R.ERR_BAD_REQUEST,R.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function Da(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function Pa(t,r){t=t||10;const e=new Array(t),a=new Array(t);let o=0,u=0,_;return r=r!==void 0?r:1e3,function(g){const y=Date.now(),m=a[u];_||(_=y),e[o]=g,a[o]=y;let v=u,C=0;for(;v!==o;)C+=e[v++],v=v%t;if(o=(o+1)%t,o===u&&(u=(u+1)%t),y-_<r)return;const O=m&&y-m;return O?Math.round(C*1e3/O):void 0}}function Na(t,r){let e=0,a=1e3/r,o,u;const _=(y,m=Date.now())=>{e=m,o=null,u&&(clearTimeout(u),u=null),t.apply(null,y)};return[(...y)=>{const m=Date.now(),v=m-e;v>=a?_(y,m):(o=y,u||(u=setTimeout(()=>{u=null,_(o)},a-v)))},()=>o&&_(o)]}const at=(t,r,e=3)=>{let a=0;const o=Pa(50,250);return Na(u=>{const _=u.loaded,c=u.lengthComputable?u.total:void 0,g=_-a,y=o(g),m=_<=c;a=_;const v={loaded:_,total:c,progress:c?_/c:void 0,bytes:g,rate:y||void 0,estimated:y&&c&&m?(c-_)/y:void 0,event:u,lengthComputable:c!=null,[r?"download":"upload"]:!0};t(v)},e)},oi=(t,r)=>{const e=t!=null;return[a=>r[0]({lengthComputable:e,total:t,loaded:a}),r[1]]},ui=t=>(...r)=>f.asap(()=>t(...r));var Ia=Q.hasStandardBrowserEnv?function(){const r=Q.navigator&&/(msie|trident)/i.test(Q.navigator.userAgent),e=document.createElement("a");let a;function o(u){let _=u;return r&&(e.setAttribute("href",_),_=e.href),e.setAttribute("href",_),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return a=o(window.location.href),function(_){const c=f.isString(_)?o(_):_;return c.protocol===a.protocol&&c.host===a.host}}():function(){return function(){return!0}}(),Ma=Q.hasStandardBrowserEnv?{write(t,r,e,a,o,u){const _=[t+"="+encodeURIComponent(r)];f.isNumber(e)&&_.push("expires="+new Date(e).toGMTString()),f.isString(a)&&_.push("path="+a),f.isString(o)&&_.push("domain="+o),u===!0&&_.push("secure"),document.cookie=_.join("; ")},read(t){const r=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function La(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Fa(t,r){return r?t.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):t}function _i(t,r){return t&&!La(r)?Fa(t,r):r}const li=t=>t instanceof X?{...t}:t;function we(t,r){r=r||{};const e={};function a(y,m,v){return f.isPlainObject(y)&&f.isPlainObject(m)?f.merge.call({caseless:v},y,m):f.isPlainObject(m)?f.merge({},m):f.isArray(m)?m.slice():m}function o(y,m,v){if(f.isUndefined(m)){if(!f.isUndefined(y))return a(void 0,y,v)}else return a(y,m,v)}function u(y,m){if(!f.isUndefined(m))return a(void 0,m)}function _(y,m){if(f.isUndefined(m)){if(!f.isUndefined(y))return a(void 0,y)}else return a(void 0,m)}function c(y,m,v){if(v in r)return a(y,m);if(v in t)return a(void 0,y)}const g={url:u,method:u,data:u,baseURL:_,transformRequest:_,transformResponse:_,paramsSerializer:_,timeout:_,timeoutMessage:_,withCredentials:_,withXSRFToken:_,adapter:_,responseType:_,xsrfCookieName:_,xsrfHeaderName:_,onUploadProgress:_,onDownloadProgress:_,decompress:_,maxContentLength:_,maxBodyLength:_,beforeRedirect:_,transport:_,httpAgent:_,httpsAgent:_,cancelToken:_,socketPath:_,responseEncoding:_,validateStatus:c,headers:(y,m)=>o(li(y),li(m),!0)};return f.forEach(Object.keys(Object.assign({},t,r)),function(m){const v=g[m]||o,C=v(t[m],r[m],m);f.isUndefined(C)&&v!==c||(e[m]=C)}),e}var ci=t=>{const r=we({},t);let{data:e,withXSRFToken:a,xsrfHeaderName:o,xsrfCookieName:u,headers:_,auth:c}=r;r.headers=_=X.from(_),r.url=ei(_i(r.baseURL,r.url),t.params,t.paramsSerializer),c&&_.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let g;if(f.isFormData(e)){if(Q.hasStandardBrowserEnv||Q.hasStandardBrowserWebWorkerEnv)_.setContentType(void 0);else if((g=_.getContentType())!==!1){const[y,...m]=g?g.split(";").map(v=>v.trim()).filter(Boolean):[];_.setContentType([y||"multipart/form-data",...m].join("; "))}}if(Q.hasStandardBrowserEnv&&(a&&f.isFunction(a)&&(a=a(r)),a||a!==!1&&Ia(r.url))){const y=o&&u&&Ma.read(u);y&&_.set(o,y)}return r},Ua=typeof XMLHttpRequest<"u"&&function(t){return new Promise(function(e,a){const o=ci(t);let u=o.data;const _=X.from(o.headers).normalize();let{responseType:c,onUploadProgress:g,onDownloadProgress:y}=o,m,v,C,O,A;function E(){O&&O(),A&&A(),o.cancelToken&&o.cancelToken.unsubscribe(m),o.signal&&o.signal.removeEventListener("abort",m)}let w=new XMLHttpRequest;w.open(o.method.toUpperCase(),o.url,!0),w.timeout=o.timeout;function D(){if(!w)return;const P=X.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),ee={data:!c||c==="text"||c==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:P,config:t,request:w};si(function(B){e(B),E()},function(B){a(B),E()},ee),w=null}"onloadend"in w?w.onloadend=D:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(D)},w.onabort=function(){w&&(a(new R("Request aborted",R.ECONNABORTED,t,w)),w=null)},w.onerror=function(){a(new R("Network Error",R.ERR_NETWORK,t,w)),w=null},w.ontimeout=function(){let I=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const ee=o.transitional||ni;o.timeoutErrorMessage&&(I=o.timeoutErrorMessage),a(new R(I,ee.clarifyTimeoutError?R.ETIMEDOUT:R.ECONNABORTED,t,w)),w=null},u===void 0&&_.setContentType(null),"setRequestHeader"in w&&f.forEach(_.toJSON(),function(I,ee){w.setRequestHeader(ee,I)}),f.isUndefined(o.withCredentials)||(w.withCredentials=!!o.withCredentials),c&&c!=="json"&&(w.responseType=o.responseType),y&&([C,A]=at(y,!0),w.addEventListener("progress",C)),g&&w.upload&&([v,O]=at(g),w.upload.addEventListener("progress",v),w.upload.addEventListener("loadend",O)),(o.cancelToken||o.signal)&&(m=P=>{w&&(a(!P||P.type?new Te(null,t,w):P),w.abort(),w=null)},o.cancelToken&&o.cancelToken.subscribe(m),o.signal&&(o.signal.aborted?m():o.signal.addEventListener("abort",m)));const K=Da(o.url);if(K&&Q.protocols.indexOf(K)===-1){a(new R("Unsupported protocol "+K+":",R.ERR_BAD_REQUEST,t));return}w.send(u||null)})};const Ba=(t,r)=>{let e=new AbortController,a;const o=function(g){if(!a){a=!0,_();const y=g instanceof Error?g:this.reason;e.abort(y instanceof R?y:new Te(y instanceof Error?y.message:y))}};let u=r&&setTimeout(()=>{o(new R(`timeout ${r} of ms exceeded`,R.ETIMEDOUT))},r);const _=()=>{t&&(u&&clearTimeout(u),u=null,t.forEach(g=>{g&&(g.removeEventListener?g.removeEventListener("abort",o):g.unsubscribe(o))}),t=null)};t.forEach(g=>g&&g.addEventListener&&g.addEventListener("abort",o));const{signal:c}=e;return c.unsubscribe=_,[c,()=>{u&&clearTimeout(u),u=null}]},Ha=function*(t,r){let e=t.byteLength;if(!r||e<r){yield t;return}let a=0,o;for(;a<e;)o=a+r,yield t.slice(a,o),a=o},qa=async function*(t,r,e){for await(const a of t)yield*Ha(ArrayBuffer.isView(a)?a:await e(String(a)),r)},fi=(t,r,e,a,o)=>{const u=qa(t,r,o);let _=0,c,g=y=>{c||(c=!0,a&&a(y))};return new ReadableStream({async pull(y){try{const{done:m,value:v}=await u.next();if(m){g(),y.close();return}let C=v.byteLength;if(e){let O=_+=C;e(O)}y.enqueue(new Uint8Array(v))}catch(m){throw g(m),m}},cancel(y){return g(y),u.return()}},{highWaterMark:2})},st=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",pi=st&&typeof ReadableStream=="function",St=st&&(typeof TextEncoder=="function"?(t=>r=>t.encode(r))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),di=(t,...r)=>{try{return!!t(...r)}catch{return!1}},Wa=pi&&di(()=>{let t=!1;const r=new Request(Q.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!r}),mi=64*1024,Et=pi&&di(()=>f.isReadableStream(new Response("").body)),ot={stream:Et&&(t=>t.body)};st&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(r=>{!ot[r]&&(ot[r]=f.isFunction(t[r])?e=>e[r]():(e,a)=>{throw new R(`Response type '${r}' is not supported`,R.ERR_NOT_SUPPORT,a)})})})(new Response);const za=async t=>{if(t==null)return 0;if(f.isBlob(t))return t.size;if(f.isSpecCompliantForm(t))return(await new Request(t).arrayBuffer()).byteLength;if(f.isArrayBufferView(t)||f.isArrayBuffer(t))return t.byteLength;if(f.isURLSearchParams(t)&&(t=t+""),f.isString(t))return(await St(t)).byteLength},Va=async(t,r)=>{const e=f.toFiniteNumber(t.getContentLength());return e??za(r)};var Ka=st&&(async t=>{let{url:r,method:e,data:a,signal:o,cancelToken:u,timeout:_,onDownloadProgress:c,onUploadProgress:g,responseType:y,headers:m,withCredentials:v="same-origin",fetchOptions:C}=ci(t);y=y?(y+"").toLowerCase():"text";let[O,A]=o||u||_?Ba([o,u],_):[],E,w;const D=()=>{!E&&setTimeout(()=>{O&&O.unsubscribe()}),E=!0};let K;try{if(g&&Wa&&e!=="get"&&e!=="head"&&(K=await Va(m,a))!==0){let B=new Request(r,{method:"POST",body:a,duplex:"half"}),ne;if(f.isFormData(a)&&(ne=B.headers.get("content-type"))&&m.setContentType(ne),B.body){const[pe,ce]=oi(K,at(ui(g)));a=fi(B.body,mi,pe,ce,St)}}f.isString(v)||(v=v?"include":"omit");const P="credentials"in Request.prototype;w=new Request(r,{...C,signal:O,method:e.toUpperCase(),headers:m.normalize().toJSON(),body:a,duplex:"half",credentials:P?v:void 0});let I=await fetch(w);const ee=Et&&(y==="stream"||y==="response");if(Et&&(c||ee)){const B={};["status","statusText","headers"].forEach(re=>{B[re]=I[re]});const ne=f.toFiniteNumber(I.headers.get("content-length")),[pe,ce]=c&&oi(ne,at(ui(c),!0))||[];I=new Response(fi(I.body,mi,pe,()=>{ce&&ce(),ee&&D()},St),B)}y=y||"text";let W=await ot[f.findKey(ot,y)||"text"](I,t);return!ee&&D(),A&&A(),await new Promise((B,ne)=>{si(B,ne,{data:W,headers:X.from(I.headers),status:I.status,statusText:I.statusText,config:t,request:w})})}catch(P){throw D(),P&&P.name==="TypeError"&&/fetch/i.test(P.message)?Object.assign(new R("Network Error",R.ERR_NETWORK,t,w),{cause:P.cause||P}):R.from(P,P&&P.code,t,w)}});const Rt={http:la,xhr:Ua,fetch:Ka};f.forEach(Rt,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const yi=t=>`- ${t}`,Ja=t=>f.isFunction(t)||t===null||t===!1;var hi={getAdapter:t=>{t=f.isArray(t)?t:[t];const{length:r}=t;let e,a;const o={};for(let u=0;u<r;u++){e=t[u];let _;if(a=e,!Ja(e)&&(a=Rt[(_=String(e)).toLowerCase()],a===void 0))throw new R(`Unknown adapter '${_}'`);if(a)break;o[_||"#"+u]=a}if(!a){const u=Object.entries(o).map(([c,g])=>`adapter ${c} `+(g===!1?"is not supported by the environment":"is not available in the build"));let _=r?u.length>1?`since :
`+u.map(yi).join(`
`):" "+yi(u[0]):"as no adapter specified";throw new R("There is no suitable adapter to dispatch the request "+_,"ERR_NOT_SUPPORT")}return a},adapters:Rt};function Ct(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Te(null,t)}function gi(t){return Ct(t),t.headers=X.from(t.headers),t.data=xt.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),hi.getAdapter(t.adapter||De.adapter)(t).then(function(a){return Ct(t),a.data=xt.call(t,t.transformResponse,a),a.headers=X.from(a.headers),a},function(a){return ai(a)||(Ct(t),a&&a.response&&(a.response.data=xt.call(t,t.transformResponse,a.response),a.response.headers=X.from(a.response.headers))),Promise.reject(a)})}const vi="1.7.5",Tt={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{Tt[t]=function(a){return typeof a===t||"a"+(r<1?"n ":" ")+t}});const wi={};Tt.transitional=function(r,e,a){function o(u,_){return"[Axios v"+vi+"] Transitional option '"+u+"'"+_+(a?". "+a:"")}return(u,_,c)=>{if(r===!1)throw new R(o(_," has been removed"+(e?" in "+e:"")),R.ERR_DEPRECATED);return e&&!wi[_]&&(wi[_]=!0,console.warn(o(_," has been deprecated since v"+e+" and will be removed in the near future"))),r?r(u,_,c):!0}};function $a(t,r,e){if(typeof t!="object")throw new R("options must be an object",R.ERR_BAD_OPTION_VALUE);const a=Object.keys(t);let o=a.length;for(;o-- >0;){const u=a[o],_=r[u];if(_){const c=t[u],g=c===void 0||_(c,u,t);if(g!==!0)throw new R("option "+u+" must be "+g,R.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new R("Unknown option "+u,R.ERR_BAD_OPTION)}}var kt={assertOptions:$a,validators:Tt};const he=kt.validators;class be{constructor(r){this.defaults=r,this.interceptors={request:new ti,response:new ti}}async request(r,e){try{return await this._request(r,e)}catch(a){if(a instanceof Error){let o;Error.captureStackTrace?Error.captureStackTrace(o={}):o=new Error;const u=o.stack?o.stack.replace(/^.+\n/,""):"";try{a.stack?u&&!String(a.stack).endsWith(u.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+u):a.stack=u}catch{}}throw a}}_request(r,e){typeof r=="string"?(e=e||{},e.url=r):e=r||{},e=we(this.defaults,e);const{transitional:a,paramsSerializer:o,headers:u}=e;a!==void 0&&kt.assertOptions(a,{silentJSONParsing:he.transitional(he.boolean),forcedJSONParsing:he.transitional(he.boolean),clarifyTimeoutError:he.transitional(he.boolean)},!1),o!=null&&(f.isFunction(o)?e.paramsSerializer={serialize:o}:kt.assertOptions(o,{encode:he.function,serialize:he.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let _=u&&f.merge(u.common,u[e.method]);u&&f.forEach(["delete","get","head","post","put","patch","common"],A=>{delete u[A]}),e.headers=X.concat(_,u);const c=[];let g=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(e)===!1||(g=g&&E.synchronous,c.unshift(E.fulfilled,E.rejected))});const y=[];this.interceptors.response.forEach(function(E){y.push(E.fulfilled,E.rejected)});let m,v=0,C;if(!g){const A=[gi.bind(this),void 0];for(A.unshift.apply(A,c),A.push.apply(A,y),C=A.length,m=Promise.resolve(e);v<C;)m=m.then(A[v++],A[v++]);return m}C=c.length;let O=e;for(v=0;v<C;){const A=c[v++],E=c[v++];try{O=A(O)}catch(w){E.call(this,w);break}}try{m=gi.call(this,O)}catch(A){return Promise.reject(A)}for(v=0,C=y.length;v<C;)m=m.then(y[v++],y[v++]);return m}getUri(r){r=we(this.defaults,r);const e=_i(r.baseURL,r.url);return ei(e,r.params,r.paramsSerializer)}}f.forEach(["delete","get","head","options"],function(r){be.prototype[r]=function(e,a){return this.request(we(a||{},{method:r,url:e,data:(a||{}).data}))}}),f.forEach(["post","put","patch"],function(r){function e(a){return function(u,_,c){return this.request(we(c||{},{method:r,headers:a?{"Content-Type":"multipart/form-data"}:{},url:u,data:_}))}}be.prototype[r]=e(),be.prototype[r+"Form"]=e(!0)});class jt{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(u){e=u});const a=this;this.promise.then(o=>{if(!a._listeners)return;let u=a._listeners.length;for(;u-- >0;)a._listeners[u](o);a._listeners=null}),this.promise.then=o=>{let u;const _=new Promise(c=>{a.subscribe(c),u=c}).then(o);return _.cancel=function(){a.unsubscribe(u)},_},r(function(u,_,c){a.reason||(a.reason=new Te(u,_,c),e(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const e=this._listeners.indexOf(r);e!==-1&&this._listeners.splice(e,1)}static source(){let r;return{token:new jt(function(o){r=o}),cancel:r}}}function Ga(t){return function(e){return t.apply(null,e)}}function Ya(t){return f.isObject(t)&&t.isAxiosError===!0}const Ot={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ot).forEach(([t,r])=>{Ot[r]=t});function bi(t){const r=new be(t),e=Fr(be.prototype.request,r);return f.extend(e,be.prototype,r,{allOwnKeys:!0}),f.extend(e,r,null,{allOwnKeys:!0}),e.create=function(o){return bi(we(t,o))},e}const H=bi(De);H.Axios=be,H.CanceledError=Te,H.CancelToken=jt,H.isCancel=ai,H.VERSION=vi,H.toFormData=rt,H.AxiosError=R,H.Cancel=H.CanceledError,H.all=function(r){return Promise.all(r)},H.spread=Ga,H.isAxiosError=Ya,H.mergeConfig=we,H.AxiosHeaders=X,H.formToJSON=t=>ri(f.isHTMLForm(t)?new FormData(t):t),H.getAdapter=hi.getAdapter,H.HttpStatusCode=Ot,H.default=H;var Xa="/diablo_web/assets/Diablo-HsPpTCNE.wasm",ut=function(){var t=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(r){r=r||{};var e=typeof r<"u"?r:{},a={},o;for(o in e)e.hasOwnProperty(o)&&(a[o]=e[o]);e.arguments=[],e.thisProgram="./this.program",e.quit=function(n,i){throw i},e.preRun=[],e.postRun=[];var u=!1,_=!1,c=!1,g=!1,y=!1;u=typeof window=="object",_=typeof importScripts=="function",g=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",c=g&&!u&&!_,y=!u&&!c&&!_;var m="";function v(n){return e.locateFile?e.locateFile(n,m):m+n}var C,O;if(c){m=__dirname+"/";var A,E;C=function(i,s){var l;return A||(A=require("fs")),E||(E=require("path")),i=E.normalize(i),l=A.readFileSync(i),s?l:l.toString()},O=function(i){var s=C(i,!0);return s.buffer||(s=new Uint8Array(s)),ne(s.buffer),s},process.argv.length>1&&(e.thisProgram=process.argv[1].replace(/\\/g,"/")),e.arguments=process.argv.slice(2),process.on("uncaughtException",function(n){if(!(n instanceof le))throw n}),process.on("unhandledRejection",L),e.quit=function(n){process.exit(n)},e.inspect=function(){return"[Emscripten Module object]"}}else y?(typeof read<"u"&&(C=function(i){return read(i)}),O=function(i){var s;return typeof readbuffer=="function"?new Uint8Array(readbuffer(i)):(s=read(i,"binary"),ne(typeof s=="object"),s)},typeof scriptArgs<"u"?e.arguments=scriptArgs:typeof arguments<"u"&&(e.arguments=arguments),typeof quit=="function"&&(e.quit=function(n){quit(n)})):(u||_)&&(_?m=self.location.href:document.currentScript&&(m=document.currentScript.src),t&&(m=t),m.indexOf("blob:")!==0?m=m.substr(0,m.lastIndexOf("/")+1):m="",C=function(i){var s=new XMLHttpRequest;return s.open("GET",i,!1),s.send(null),s.responseText},_&&(O=function(i){var s=new XMLHttpRequest;return s.open("GET",i,!1),s.responseType="arraybuffer",s.send(null),new Uint8Array(s.response)}));var w=e.print||(typeof console<"u"?console.log.bind(console):typeof print<"u"?print:null),D=e.printErr||(typeof printErr<"u"?printErr:typeof console<"u"&&console.warn.bind(console)||w);for(o in a)a.hasOwnProperty(o)&&(e[o]=a[o]);a=void 0;var K={"f64-rem":function(n,i){return n%i},debugger:function(){debugger}};new Array(0);var P=0,I=function(n){P=n},ee=function(){return P};typeof WebAssembly!="object"&&D("no native wasm support detected");var W,B=!1;function ne(n,i){n||L("Assertion failed: "+i)}var pe=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ce(n,i,s){for(var l=i+s,p=i;n[p]&&!(p>=l);)++p;if(p-i>16&&n.subarray&&pe)return pe.decode(n.subarray(i,p));for(var d="";i<p;){var h=n[i++];if(!(h&128)){d+=String.fromCharCode(h);continue}var b=n[i++]&63;if((h&224)==192){d+=String.fromCharCode((h&31)<<6|b);continue}var N=n[i++]&63;if((h&240)==224?h=(h&15)<<12|b<<6|N:h=(h&7)<<18|b<<12|N<<6|n[i++]&63,h<65536)d+=String.fromCharCode(h);else{var F=h-65536;d+=String.fromCharCode(55296|F>>10,56320|F&1023)}}return d}function re(n,i){return n?ce(x,n,i):""}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");var Nt=65536;function xe(n,i){return n%i>0&&(n+=i-n%i),n}var M,Ne,x,U,Ie;function Me(){e.HEAP8=Ne=new Int8Array(M),e.HEAP16=new Int16Array(M),e.HEAP32=U=new Int32Array(M),e.HEAPU8=x=new Uint8Array(M),e.HEAPU16=new Uint16Array(M),e.HEAPU32=new Uint32Array(M),e.HEAPF32=Ie=new Float32Array(M),e.HEAPF64=new Float64Array(M)}var It=7118624,Le=1875712,Fe=5242880,de=e.TOTAL_MEMORY||134217728;de<Fe&&D("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+de+"! (TOTAL_STACK="+Fe+")"),e.wasmMemory?W=e.wasmMemory:W=new WebAssembly.Memory({initial:de/Nt}),W&&(M=W.buffer),de=M.byteLength,Me(),U[Le>>2]=It;function me(n){for(;n.length>0;){var i=n.shift();if(typeof i=="function"){i();continue}var s=i.func;typeof s=="number"?i.arg===void 0?e.dynCall_v(s):e.dynCall_vi(s,i.arg):s(i.arg===void 0?null:i.arg)}}var Ue=[],Be=[],Mt=[],He=[];function Lt(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)Ht(e.preRun.shift());me(Ue)}function Ft(){me(Be)}function Ut(){me(Mt)}function Bt(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)qe(e.postRun.shift());me(He)}function Ht(n){Ue.unshift(n)}function qe(n){He.unshift(n)}var Y=0,oe=null;function qt(n){Y++,e.monitorRunDependencies&&e.monitorRunDependencies(Y)}function Wt(n){if(Y--,e.monitorRunDependencies&&e.monitorRunDependencies(Y),Y==0&&oe){var i=oe;oe=null,i()}}e.preloadedImages={},e.preloadedAudios={};var We="data:application/octet-stream;base64,";function ze(n){return String.prototype.startsWith?n.startsWith(We):n.indexOf(We)===0}var J="Diablo.wasm";ze(J)||(J=v(J));function Ve(){try{if(e.wasmBinary)return new Uint8Array(e.wasmBinary);if(O)return O(J);throw"both async and sync fetching of the wasm failed"}catch(n){L(n)}}function zt(){return!e.wasmBinary&&(u||_)&&typeof fetch=="function"?fetch(J,{credentials:"same-origin"}).then(function(n){if(!n.ok)throw"failed to load wasm binary file at '"+J+"'";return n.arrayBuffer()}).catch(function(){return Ve()}):new Promise(function(n,i){n(Ve())})}function Vt(n){var i={env:n,global:{NaN:NaN,Infinity:1/0},"global.Math":Math,asm2wasm:K};function s(b,N){var F=b.exports;e.asm=F,Wt()}qt();function l(b){s(b.instance)}function p(b){return zt().then(function(N){return WebAssembly.instantiate(N,i)}).then(b,function(N){D("failed to asynchronously prepare wasm: "+N),L(N)})}function d(){if(!e.wasmBinary&&typeof WebAssembly.instantiateStreaming=="function"&&!ze(J)&&typeof fetch=="function")fetch(J,{credentials:"same-origin"}).then(function(b){return WebAssembly.instantiateStreaming(b,i).then(l,function(N){D("wasm streaming compile failed: "+N),D("falling back to ArrayBuffer instantiation"),p(l)})});else return p(l)}if(e.instantiateWasm)try{var h=e.instantiateWasm(i,s);return h}catch(b){return D("Module.instantiateWasm callback failed with error: "+b),!1}return d(),{}}e.asm=function(n,i,s){i.memory=W,i.table=new WebAssembly.Table({initial:1116,maximum:1116,element:"anyfunc"}),i.__memory_base=1024,i.__table_base=0;var l=Vt(i);return l};var Kt=[function(n){self.DApi.current_save_id(n)}];function Jt(n,i){return Kt[n](i)}function $t(){self.DApi.close_keyboard()}function Gt(n,i,s,l,p){self.DApi.open_keyboard(n,i,s,l,p)}function Yt(n,i,s){self.DApi.create_sound(n,x.slice(i,i+s))}function Xt(n,i,s,l,p){self.DApi.create_sound_raw(n,Ie.slice(i/4,i/4+s*l),s,l,p)}function Zt(n){self.DApi.delete_sound(n)}function Qt(){self.DApi.draw_begin()}function en(n){self.DApi.draw_belt(U.subarray(n/4,n/4+8))}function tn(n,i,s,l,p){self.DApi.draw_blit(n,i,s,l,x.subarray(p,p+s*l*4))}function nn(n,i,s,l){self.DApi.draw_clip_text(n,i,s,l)}function rn(){self.DApi.draw_end()}function an(n,i,s,l){var p=x.indexOf(0,s),d=String.fromCharCode.apply(null,x.subarray(s,p));self.DApi.draw_text(n,i,d,l)}function sn(n,i){self.DApi.duplicate_sound(n,i)}function on(){self.DApi.exit_game()}function un(n,i,s,l){self.DApi.play_sound(n,i,s,l)}function _n(n,i){self.DApi.set_cursor(n,i)}function ln(n,i){self.DApi.set_volume(n,i)}function cn(n){self.DApi.stop_sound(n)}function fn(n){self.DApi.use_websocket(n)}function pn(){return self.DApi.websocket_closed()}function dn(n,i){self.DApi.websocket_send(x.subarray(n,n+i))}function mn(n){var i=x.indexOf(0,n),s=String.fromCharCode.apply(null,x.subarray(n,i));self.DApi.exit_error(s)}function yn(n,i,s,l){var p=x.indexOf(0,n),d=String.fromCharCode.apply(null,x.subarray(n,p));self.DApi.get_file_contents(d,x.subarray(i,i+l),s)}function hn(n){var i=x.indexOf(0,n),s=String.fromCharCode.apply(null,x.subarray(n,i));return self.DApi.get_file_size(s)}function gn(n,i,s){var l=x.indexOf(0,n),p=String.fromCharCode.apply(null,x.subarray(n,l));self.DApi.put_file_contents(p,x.slice(i,i+s))}function vn(n){var i=x.indexOf(0,n),s=String.fromCharCode.apply(null,x.subarray(n,i));self.DApi.remove_file(s)}function wn(n){var i=x.indexOf(0,n),s=String.fromCharCode.apply(null,x.subarray(n,i));self.alert(s)}function bn(){self.WASM_TRACE&&self.WASM_TRACE.pop()}function An(n){var i=x.indexOf(0,n),s=String.fromCharCode.apply(null,x.subarray(n,i));console.log(s),self.WASM_TRACE=self.WASM_TRACE||[],self.WASM_TRACE.push(s)}Be.push({func:function(){wr()}});var xn=1875728;function Sn(n,i,s,l){L("Assertion failed: "+re(n)+", at: "+[i?re(i):"unknown filename",s,l?re(l):"unknown function"])}function En(n){return vr(n)}var z={},Ke=[];function Je(n){if(n){var i=z[n];i.refcount++}}function Se(n){if(!n||z[n])return n;for(var i in z)for(var s=+i,l=z[s].adjusted,p=l.length,d=0;d<p;d++)if(l[d]===n)return s;return n}function Rn(n){var i=z[n];return i&&!i.caught&&(i.caught=!0,_e.uncaught_exceptions--),i&&(i.rethrown=!1),Ke.push(n),Je(Se(n)),n}var ue=0;function $e(n){try{return gr(n)}catch{}}function Ge(n){if(n){var i=z[n];i.refcount--,i.refcount===0&&!i.rethrown&&(i.destructor&&e.dynCall_vi(i.destructor,n),delete z[n],$e(n))}}function Cn(){T(0);var n=Ke.pop();n&&(Ge(Se(n)),ue=0)}function Tn(n){throw ue||(ue=n),n}function ye(){var n=ue;if(!n)return I(0),0|0;var i=z[n],s=i.type;if(!s)return I(0),n|0;var l=Array.prototype.slice.call(arguments);hr(s);var p=1875696;U[p>>2]=n,n=p;for(var d=0;d<l.length;d++)if(l[d]&&yr(l[d],s,n))return n=U[n>>2],i.adjusted.push(n),I(l[d]),n|0;return n=U[n>>2],I(s),n|0}e.___cxa_find_matching_catch=ye;function kn(n,i){return ye(n,i)}function jn(n,i,s){return ye(n,i,s)}function On(n){return n}function Dn(){throw B=!0,"Pure virtual function called!"}function Pn(n,i,s){throw z[n]={ptr:n,adjusted:[n],type:i,destructor:s,refcount:0,caught:!1,rethrown:!1},ue=n,"uncaught_exception"in _e?_e.uncaught_exceptions++:_e.uncaught_exceptions=1,n}function Nn(){return _e.uncaught_exceptions}function In(){}function Mn(){}var S={buffers:[null,[],[]],printChar:function(n,i){var s=S.buffers[n];i===0||i===10?((n===1?w:D)(ce(s,0)),s.length=0):s.push(i)},varargs:0,get:function(n){S.varargs+=4;var i=U[S.varargs-4>>2];return i},getStr:function(){var n=re(S.get());return n},get64:function(){var n=S.get();return S.get(),n},getZero:function(){S.get()}};function Ln(n,i){S.varargs=i;try{var s=S.getStreamFromFD(),l=S.get(),p=S.get(),d=S.get(),h=S.get();return 0}catch(b){return(typeof FS>"u"||!(b instanceof FS.ErrnoError))&&L(b),-b.errno}}function Fn(){var n=e._fflush;n&&n(0);var i=S.buffers;i[1].length&&S.printChar(1,10),i[2].length&&S.printChar(2,10)}function Un(n,i){S.varargs=i;try{for(var s=S.get(),l=S.get(),p=S.get(),d=0,h=0;h<p;h++){for(var b=U[l+h*8>>2],N=U[l+(h*8+4)>>2],F=0;F<N;F++)S.printChar(s,x[b+F]);d+=N}return d}catch(Re){return(typeof FS>"u"||!(Re instanceof FS.ErrnoError))&&L(Re),-Re.errno}}function Bn(n,i){S.varargs=i;try{return 0}catch(s){return(typeof FS>"u"||!(s instanceof FS.ErrnoError))&&L(s),-s.errno}}function Hn(n,i){S.varargs=i;try{var s=S.getStreamFromFD();return 0}catch(l){return(typeof FS>"u"||!(l instanceof FS.ErrnoError))&&L(l),-l.errno}}function qn(){}function Wn(){e.abort()}function Ye(){return Ne.length}function zn(n){Lr(n)}function Vn(n){return n}function Kn(){L("trap!")}function Jn(n,i,s){x.set(x.subarray(i,i+s),n)}function $n(n){return e.___errno_location&&(U[e.___errno_location()>>2]=n),n}function Gn(n){L("OOM")}function Xe(n){var i=65536;n=xe(n,i);var s=M.byteLength;try{var l=W.grow((n-s)/65536);return l!==-1?(M=W.buffer,!0):!1}catch{return!1}}function Yn(n){var i=Ye(),s=65536,l=2147483648-s;if(n>l)return!1;for(var p=16777216,d=Math.max(i,p);d<n;)d<=536870912?d=xe(2*d,s):d=Math.min(xe((3*d+2147483648)/4,s),l);return Xe(d)?(Me(),!0):!1}function Xn(n){var i=Date.now()/1e3|0;return n&&(U[n>>2]=i),i}function Zn(n){var i=j();try{return br(n)}catch(s){if(k(i),s!==s+0&&s!=="longjmp")throw s;T(1,0)}}function Qn(n,i){var s=j();try{return Ar(n,i)}catch(l){if(k(s),l!==l+0&&l!=="longjmp")throw l;T(1,0)}}function er(n,i,s){var l=j();try{return xr(n,i,s)}catch(p){if(k(l),p!==p+0&&p!=="longjmp")throw p;T(1,0)}}function tr(n,i,s,l){var p=j();try{return Sr(n,i,s,l)}catch(d){if(k(p),d!==d+0&&d!=="longjmp")throw d;T(1,0)}}function nr(n,i,s,l,p){var d=j();try{return Er(n,i,s,l,p)}catch(h){if(k(d),h!==h+0&&h!=="longjmp")throw h;T(1,0)}}function rr(n,i,s,l,p,d){var h=j();try{return Rr(n,i,s,l,p,d)}catch(b){if(k(h),b!==b+0&&b!=="longjmp")throw b;T(1,0)}}function ir(n,i){var s=j();try{return Cr(n,i)}catch(l){if(k(s),l!==l+0&&l!=="longjmp")throw l;T(1,0)}}function ar(n){var i=j();try{Tr(n)}catch(s){if(k(i),s!==s+0&&s!=="longjmp")throw s;T(1,0)}}function sr(n,i){var s=j();try{kr(n,i)}catch(l){if(k(s),l!==l+0&&l!=="longjmp")throw l;T(1,0)}}function or(n,i,s){var l=j();try{jr(n,i,s)}catch(p){if(k(l),p!==p+0&&p!=="longjmp")throw p;T(1,0)}}function ur(n,i,s,l){var p=j();try{Or(n,i,s,l)}catch(d){if(k(p),d!==d+0&&d!=="longjmp")throw d;T(1,0)}}function _r(n,i,s,l,p){var d=j();try{Dr(n,i,s,l,p)}catch(h){if(k(d),h!==h+0&&h!=="longjmp")throw h;T(1,0)}}function lr(n,i,s,l,p,d){var h=j();try{Pr(n,i,s,l,p,d)}catch(b){if(k(h),b!==b+0&&b!=="longjmp")throw b;T(1,0)}}function cr(n,i,s,l,p,d,h,b){var N=j();try{Nr(n,i,s,l,p,d,h,b)}catch(F){if(k(N),F!==F+0&&F!=="longjmp")throw F;T(1,0)}}function fr(n,i,s,l,p){var d=j();try{Ir(n,i,s,l,p)}catch(h){if(k(d),h!==h+0&&h!=="longjmp")throw h;T(1,0)}}function pr(n,i,s,l,p){var d=j();try{Mr(n,i,s,l,p)}catch(h){if(k(d),h!==h+0&&h!=="longjmp")throw h;T(1,0)}}var dr={},mr={abort:L,setTempRet0:I,getTempRet0:ee,invoke_i:Zn,invoke_ii:Qn,invoke_iii:er,invoke_iiii:tr,invoke_iiiii:nr,invoke_iiiiii:rr,invoke_ji:ir,invoke_v:ar,invoke_vi:sr,invoke_vii:or,invoke_viii:ur,invoke_viiii:_r,invoke_viiiii:lr,invoke_viiiiiii:cr,invoke_viij:fr,invoke_viji:pr,___assert_fail:Sn,___cxa_allocate_exception:En,___cxa_begin_catch:Rn,___cxa_end_catch:Cn,___cxa_find_matching_catch:ye,___cxa_find_matching_catch_2:kn,___cxa_find_matching_catch_3:jn,___cxa_free_exception:$e,___cxa_get_exception_ptr:On,___cxa_pure_virtual:Dn,___cxa_throw:Pn,___cxa_uncaught_exceptions:Nn,___exception_addRef:Je,___exception_deAdjust:Se,___exception_decRef:Ge,___gxx_personality_v0:In,___lock:Mn,___resumeException:Tn,___setErrNo:$n,___syscall140:Ln,___syscall146:Un,___syscall54:Bn,___syscall6:Hn,___unlock:qn,__api_close_keyboard:$t,__api_open_keyboard:Gt,_abort:Wn,_api_create_sound:Yt,_api_create_sound_float:Xt,_api_delete_sound:Zt,_api_draw_begin:Qt,_api_draw_belt:en,_api_draw_blit:tn,_api_draw_clip_text:nn,_api_draw_end:rn,_api_draw_text:an,_api_duplicate_sound:sn,_api_exit_game:on,_api_play_sound:un,_api_set_cursor:_n,_api_set_volume:ln,_api_stop_sound:cn,_api_use_websocket:fn,_api_websocket_closed:pn,_api_websocket_send:dn,_emscripten_asm_const_ii:Jt,_emscripten_get_heap_size:Ye,_emscripten_memcpy_big:Jn,_emscripten_resize_heap:Yn,_exit:zn,_exit_error:mn,_get_file_contents:yn,_get_file_size:hn,_llvm_eh_typeid_for:Vn,_llvm_trap:Kn,_put_file_contents:gn,_remove_file:vn,_show_alert:wn,_time:Xn,_trace_pop:bn,_trace_push:An,abortOnCannotGrowMemory:Gn,emscripten_realloc_buffer:Xe,flush_NO_FILESYSTEM:Fn,tempDoublePtr:xn,DYNAMICTOP_PTR:Le},Ze=e.asm(dr,mr,M);e.asm=Ze,e._DApi_AllocPacket=function(){return e.asm._DApi_AllocPacket.apply(null,arguments)},e._DApi_Char=function(){return e.asm._DApi_Char.apply(null,arguments)},e._DApi_Init=function(){return e.asm._DApi_Init.apply(null,arguments)},e._DApi_Key=function(){return e.asm._DApi_Key.apply(null,arguments)},e._DApi_Mouse=function(){return e.asm._DApi_Mouse.apply(null,arguments)},e._DApi_Render=function(){return e.asm._DApi_Render.apply(null,arguments)},e._DApi_SyncText=function(){return e.asm._DApi_SyncText.apply(null,arguments)},e._DApi_SyncTextPtr=function(){return e.asm._DApi_SyncTextPtr.apply(null,arguments)},e._SNet_InitWebsocket=function(){return e.asm._SNet_InitWebsocket.apply(null,arguments)},e._SNet_WebsocketStatus=function(){return e.asm._SNet_WebsocketStatus.apply(null,arguments)};var _e=e.__ZSt18uncaught_exceptionv=function(){return e.asm.__ZSt18uncaught_exceptionv.apply(null,arguments)},yr=e.___cxa_can_catch=function(){return e.asm.___cxa_can_catch.apply(null,arguments)},hr=e.___cxa_is_pointer_type=function(){return e.asm.___cxa_is_pointer_type.apply(null,arguments)};e.___em_js___api_close_keyboard=function(){return e.asm.___em_js___api_close_keyboard.apply(null,arguments)},e.___em_js___api_open_keyboard=function(){return e.asm.___em_js___api_open_keyboard.apply(null,arguments)},e.___em_js__api_create_sound=function(){return e.asm.___em_js__api_create_sound.apply(null,arguments)},e.___em_js__api_create_sound_float=function(){return e.asm.___em_js__api_create_sound_float.apply(null,arguments)},e.___em_js__api_delete_sound=function(){return e.asm.___em_js__api_delete_sound.apply(null,arguments)},e.___em_js__api_draw_begin=function(){return e.asm.___em_js__api_draw_begin.apply(null,arguments)},e.___em_js__api_draw_belt=function(){return e.asm.___em_js__api_draw_belt.apply(null,arguments)},e.___em_js__api_draw_blit=function(){return e.asm.___em_js__api_draw_blit.apply(null,arguments)},e.___em_js__api_draw_clip_text=function(){return e.asm.___em_js__api_draw_clip_text.apply(null,arguments)},e.___em_js__api_draw_end=function(){return e.asm.___em_js__api_draw_end.apply(null,arguments)},e.___em_js__api_draw_text=function(){return e.asm.___em_js__api_draw_text.apply(null,arguments)},e.___em_js__api_duplicate_sound=function(){return e.asm.___em_js__api_duplicate_sound.apply(null,arguments)},e.___em_js__api_exit_game=function(){return e.asm.___em_js__api_exit_game.apply(null,arguments)},e.___em_js__api_play_sound=function(){return e.asm.___em_js__api_play_sound.apply(null,arguments)},e.___em_js__api_set_cursor=function(){return e.asm.___em_js__api_set_cursor.apply(null,arguments)},e.___em_js__api_set_volume=function(){return e.asm.___em_js__api_set_volume.apply(null,arguments)},e.___em_js__api_stop_sound=function(){return e.asm.___em_js__api_stop_sound.apply(null,arguments)},e.___em_js__api_use_websocket=function(){return e.asm.___em_js__api_use_websocket.apply(null,arguments)},e.___em_js__api_websocket_closed=function(){return e.asm.___em_js__api_websocket_closed.apply(null,arguments)},e.___em_js__api_websocket_send=function(){return e.asm.___em_js__api_websocket_send.apply(null,arguments)},e.___em_js__exit_error=function(){return e.asm.___em_js__exit_error.apply(null,arguments)},e.___em_js__get_file_contents=function(){return e.asm.___em_js__get_file_contents.apply(null,arguments)},e.___em_js__get_file_size=function(){return e.asm.___em_js__get_file_size.apply(null,arguments)},e.___em_js__put_file_contents=function(){return e.asm.___em_js__put_file_contents.apply(null,arguments)},e.___em_js__remove_file=function(){return e.asm.___em_js__remove_file.apply(null,arguments)},e.___em_js__show_alert=function(){return e.asm.___em_js__show_alert.apply(null,arguments)},e.___em_js__trace_pop=function(){return e.asm.___em_js__trace_pop.apply(null,arguments)},e.___em_js__trace_push=function(){return e.asm.___em_js__trace_push.apply(null,arguments)},e._emscripten_replace_memory=function(){return e.asm._emscripten_replace_memory.apply(null,arguments)};var gr=e._free=function(){return e.asm._free.apply(null,arguments)};e._llvm_bswap_i32=function(){return e.asm._llvm_bswap_i32.apply(null,arguments)};var vr=e._malloc=function(){return e.asm._malloc.apply(null,arguments)};e._memcpy=function(){return e.asm._memcpy.apply(null,arguments)},e._memmove=function(){return e.asm._memmove.apply(null,arguments)},e._memset=function(){return e.asm._memset.apply(null,arguments)},e._sbrk=function(){return e.asm._sbrk.apply(null,arguments)};var T=e._setThrew=function(){return e.asm._setThrew.apply(null,arguments)};e.establishStackSpace=function(){return e.asm.establishStackSpace.apply(null,arguments)};var wr=e.globalCtors=function(){return e.asm.globalCtors.apply(null,arguments)};e.stackAlloc=function(){return e.asm.stackAlloc.apply(null,arguments)};var k=e.stackRestore=function(){return e.asm.stackRestore.apply(null,arguments)},j=e.stackSave=function(){return e.asm.stackSave.apply(null,arguments)},br=e.dynCall_i=function(){return e.asm.dynCall_i.apply(null,arguments)},Ar=e.dynCall_ii=function(){return e.asm.dynCall_ii.apply(null,arguments)};e.dynCall_iidiiii=function(){return e.asm.dynCall_iidiiii.apply(null,arguments)};var xr=e.dynCall_iii=function(){return e.asm.dynCall_iii.apply(null,arguments)},Sr=e.dynCall_iiii=function(){return e.asm.dynCall_iiii.apply(null,arguments)},Er=e.dynCall_iiiii=function(){return e.asm.dynCall_iiiii.apply(null,arguments)},Rr=e.dynCall_iiiiii=function(){return e.asm.dynCall_iiiiii.apply(null,arguments)},Cr=e.dynCall_ji=function(){return e.asm.dynCall_ji.apply(null,arguments)};e.dynCall_jiji=function(){return e.asm.dynCall_jiji.apply(null,arguments)};var Tr=e.dynCall_v=function(){return e.asm.dynCall_v.apply(null,arguments)},kr=e.dynCall_vi=function(){return e.asm.dynCall_vi.apply(null,arguments)},jr=e.dynCall_vii=function(){return e.asm.dynCall_vii.apply(null,arguments)},Or=e.dynCall_viii=function(){return e.asm.dynCall_viii.apply(null,arguments)},Dr=e.dynCall_viiii=function(){return e.asm.dynCall_viiii.apply(null,arguments)},Pr=e.dynCall_viiiii=function(){return e.asm.dynCall_viiiii.apply(null,arguments)};e.dynCall_viiiiii=function(){return e.asm.dynCall_viiiiii.apply(null,arguments)};var Nr=e.dynCall_viiiiiii=function(){return e.asm.dynCall_viiiiiii.apply(null,arguments)};e.dynCall_viiiiiiiii=function(){return e.asm.dynCall_viiiiiiiii.apply(null,arguments)},e.dynCall_viiiiiiiiii=function(){return e.asm.dynCall_viiiiiiiiii.apply(null,arguments)};var Ir=e.dynCall_viij=function(){return e.asm.dynCall_viij.apply(null,arguments)},Mr=e.dynCall_viji=function(){return e.asm.dynCall_viji.apply(null,arguments)};e.asm=Ze,e.then=function(n){if(e.calledRun)n(e);else{var i=e.onRuntimeInitialized;e.onRuntimeInitialized=function(){i&&i(),n(e)}}return e};function le(n){this.name="ExitStatus",this.message="Program terminated with exit("+n+")",this.status=n}le.prototype=new Error,le.prototype.constructor=le,oe=function n(){e.calledRun||Ee(),e.calledRun||(oe=n)};function Ee(n){if(n=n||e.arguments,Y>0||(Lt(),Y>0)||e.calledRun)return;function i(){e.calledRun||(e.calledRun=!0,!B&&(Ft(),Ut(),e.onRuntimeInitialized&&e.onRuntimeInitialized(),Bt()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),i()},1)):i()}e.run=Ee;function Lr(n,i){e.noExitRuntime||(B=!0,e.onExit&&e.onExit(n)),e.quit(n,new le(n))}function L(n){throw e.onAbort&&e.onAbort(n),n+="",w(n),D(n),B=!0,"abort("+n+"). Build with -s ASSERTIONS=1 for more info."}if(e.abort=L,e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return e.noExitRuntime=!0,Ee(),e.ready=new Promise(function(n,i){delete e.then,e.onAbort=function(s){i(s)},qe(function(){n(e)})}),r}}();typeof exports=="object"&&typeof module=="object"?module.exports=ut:typeof define=="function"&&define.amd?define([],function(){return ut}):typeof exports=="object"&&(exports.Diablo=ut);var Za="/diablo_web/assets/DiabloSpawn-C1JrivMW.wasm",_t=function(){var t=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(r){r=r||{};var e=typeof r<"u"?r:{},a={},o;for(o in e)e.hasOwnProperty(o)&&(a[o]=e[o]);e.arguments=[],e.thisProgram="./this.program",e.quit=function(n,i){throw i},e.preRun=[],e.postRun=[];var u=!1,_=!1,c=!1,g=!1,y=!1;u=typeof window=="object",_=typeof importScripts=="function",g=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",c=g&&!u&&!_,y=!u&&!c&&!_;var m="";function v(n){return e.locateFile?e.locateFile(n,m):m+n}var C,O;if(c){m=__dirname+"/";var A,E;C=function(i,s){var l;return A||(A=require("fs")),E||(E=require("path")),i=E.normalize(i),l=A.readFileSync(i),s?l:l.toString()},O=function(i){var s=C(i,!0);return s.buffer||(s=new Uint8Array(s)),ne(s.buffer),s},process.argv.length>1&&(e.thisProgram=process.argv[1].replace(/\\/g,"/")),e.arguments=process.argv.slice(2),process.on("uncaughtException",function(n){if(!(n instanceof le))throw n}),process.on("unhandledRejection",L),e.quit=function(n){process.exit(n)},e.inspect=function(){return"[Emscripten Module object]"}}else y?(typeof read<"u"&&(C=function(i){return read(i)}),O=function(i){var s;return typeof readbuffer=="function"?new Uint8Array(readbuffer(i)):(s=read(i,"binary"),ne(typeof s=="object"),s)},typeof scriptArgs<"u"?e.arguments=scriptArgs:typeof arguments<"u"&&(e.arguments=arguments),typeof quit=="function"&&(e.quit=function(n){quit(n)})):(u||_)&&(_?m=self.location.href:document.currentScript&&(m=document.currentScript.src),t&&(m=t),m.indexOf("blob:")!==0?m=m.substr(0,m.lastIndexOf("/")+1):m="",C=function(i){var s=new XMLHttpRequest;return s.open("GET",i,!1),s.send(null),s.responseText},_&&(O=function(i){var s=new XMLHttpRequest;return s.open("GET",i,!1),s.responseType="arraybuffer",s.send(null),new Uint8Array(s.response)}));var w=e.print||(typeof console<"u"?console.log.bind(console):typeof print<"u"?print:null),D=e.printErr||(typeof printErr<"u"?printErr:typeof console<"u"&&console.warn.bind(console)||w);for(o in a)a.hasOwnProperty(o)&&(e[o]=a[o]);a=void 0;var K={"f64-rem":function(n,i){return n%i},debugger:function(){debugger}};new Array(0);var P=0,I=function(n){P=n},ee=function(){return P};typeof WebAssembly!="object"&&D("no native wasm support detected");var W,B=!1;function ne(n,i){n||L("Assertion failed: "+i)}var pe=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ce(n,i,s){for(var l=i+s,p=i;n[p]&&!(p>=l);)++p;if(p-i>16&&n.subarray&&pe)return pe.decode(n.subarray(i,p));for(var d="";i<p;){var h=n[i++];if(!(h&128)){d+=String.fromCharCode(h);continue}var b=n[i++]&63;if((h&224)==192){d+=String.fromCharCode((h&31)<<6|b);continue}var N=n[i++]&63;if((h&240)==224?h=(h&15)<<12|b<<6|N:h=(h&7)<<18|b<<12|N<<6|n[i++]&63,h<65536)d+=String.fromCharCode(h);else{var F=h-65536;d+=String.fromCharCode(55296|F>>10,56320|F&1023)}}return d}function re(n,i){return n?ce(x,n,i):""}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");var Nt=65536;function xe(n,i){return n%i>0&&(n+=i-n%i),n}var M,Ne,x,U,Ie;function Me(){e.HEAP8=Ne=new Int8Array(M),e.HEAP16=new Int16Array(M),e.HEAP32=U=new Int32Array(M),e.HEAPU8=x=new Uint8Array(M),e.HEAPU16=new Uint16Array(M),e.HEAPU32=new Uint32Array(M),e.HEAPF32=Ie=new Float32Array(M),e.HEAPF64=new Float64Array(M)}var It=7093808,Le=1850896,Fe=5242880,de=e.TOTAL_MEMORY||134217728;de<Fe&&D("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+de+"! (TOTAL_STACK="+Fe+")"),e.wasmMemory?W=e.wasmMemory:W=new WebAssembly.Memory({initial:de/Nt}),W&&(M=W.buffer),de=M.byteLength,Me(),U[Le>>2]=It;function me(n){for(;n.length>0;){var i=n.shift();if(typeof i=="function"){i();continue}var s=i.func;typeof s=="number"?i.arg===void 0?e.dynCall_v(s):e.dynCall_vi(s,i.arg):s(i.arg===void 0?null:i.arg)}}var Ue=[],Be=[],Mt=[],He=[];function Lt(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)Ht(e.preRun.shift());me(Ue)}function Ft(){me(Be)}function Ut(){me(Mt)}function Bt(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)qe(e.postRun.shift());me(He)}function Ht(n){Ue.unshift(n)}function qe(n){He.unshift(n)}var Y=0,oe=null;function qt(n){Y++,e.monitorRunDependencies&&e.monitorRunDependencies(Y)}function Wt(n){if(Y--,e.monitorRunDependencies&&e.monitorRunDependencies(Y),Y==0&&oe){var i=oe;oe=null,i()}}e.preloadedImages={},e.preloadedAudios={};var We="data:application/octet-stream;base64,";function ze(n){return String.prototype.startsWith?n.startsWith(We):n.indexOf(We)===0}var J="DiabloSpawn.wasm";ze(J)||(J=v(J));function Ve(){try{if(e.wasmBinary)return new Uint8Array(e.wasmBinary);if(O)return O(J);throw"both async and sync fetching of the wasm failed"}catch(n){L(n)}}function zt(){return!e.wasmBinary&&(u||_)&&typeof fetch=="function"?fetch(J,{credentials:"same-origin"}).then(function(n){if(!n.ok)throw"failed to load wasm binary file at '"+J+"'";return n.arrayBuffer()}).catch(function(){return Ve()}):new Promise(function(n,i){n(Ve())})}function Vt(n){var i={env:n,global:{NaN:NaN,Infinity:1/0},"global.Math":Math,asm2wasm:K};function s(b,N){var F=b.exports;e.asm=F,Wt()}qt();function l(b){s(b.instance)}function p(b){return zt().then(function(N){return WebAssembly.instantiate(N,i)}).then(b,function(N){D("failed to asynchronously prepare wasm: "+N),L(N)})}function d(){if(!e.wasmBinary&&typeof WebAssembly.instantiateStreaming=="function"&&!ze(J)&&typeof fetch=="function")fetch(J,{credentials:"same-origin"}).then(function(b){return WebAssembly.instantiateStreaming(b,i).then(l,function(N){D("wasm streaming compile failed: "+N),D("falling back to ArrayBuffer instantiation"),p(l)})});else return p(l)}if(e.instantiateWasm)try{var h=e.instantiateWasm(i,s);return h}catch(b){return D("Module.instantiateWasm callback failed with error: "+b),!1}return d(),{}}e.asm=function(n,i,s){i.memory=W,i.table=new WebAssembly.Table({initial:1116,maximum:1116,element:"anyfunc"}),i.__memory_base=1024,i.__table_base=0;var l=Vt(i);return l};var Kt=[function(n){self.DApi.current_save_id(n)}];function Jt(n,i){return Kt[n](i)}function $t(){self.DApi.close_keyboard()}function Gt(n,i,s,l,p){self.DApi.open_keyboard(n,i,s,l,p)}function Yt(n,i,s){self.DApi.create_sound(n,x.slice(i,i+s))}function Xt(n,i,s,l,p){self.DApi.create_sound_raw(n,Ie.slice(i/4,i/4+s*l),s,l,p)}function Zt(n){self.DApi.delete_sound(n)}function Qt(){self.DApi.draw_begin()}function en(n){self.DApi.draw_belt(U.subarray(n/4,n/4+8))}function tn(n,i,s,l,p){self.DApi.draw_blit(n,i,s,l,x.subarray(p,p+s*l*4))}function nn(n,i,s,l){self.DApi.draw_clip_text(n,i,s,l)}function rn(){self.DApi.draw_end()}function an(n,i,s,l){var p=x.indexOf(0,s),d=String.fromCharCode.apply(null,x.subarray(s,p));self.DApi.draw_text(n,i,d,l)}function sn(n,i){self.DApi.duplicate_sound(n,i)}function on(){self.DApi.exit_game()}function un(n,i,s,l){self.DApi.play_sound(n,i,s,l)}function _n(n,i){self.DApi.set_cursor(n,i)}function ln(n,i){self.DApi.set_volume(n,i)}function cn(n){self.DApi.stop_sound(n)}function fn(n){self.DApi.use_websocket(n)}function pn(){return self.DApi.websocket_closed()}function dn(n,i){self.DApi.websocket_send(x.subarray(n,n+i))}function mn(n){var i=x.indexOf(0,n),s=String.fromCharCode.apply(null,x.subarray(n,i));self.DApi.exit_error(s)}function yn(n,i,s,l){var p=x.indexOf(0,n),d=String.fromCharCode.apply(null,x.subarray(n,p));self.DApi.get_file_contents(d,x.subarray(i,i+l),s)}function hn(n){var i=x.indexOf(0,n),s=String.fromCharCode.apply(null,x.subarray(n,i));return self.DApi.get_file_size(s)}function gn(n,i,s){var l=x.indexOf(0,n),p=String.fromCharCode.apply(null,x.subarray(n,l));self.DApi.put_file_contents(p,x.slice(i,i+s))}function vn(n){var i=x.indexOf(0,n),s=String.fromCharCode.apply(null,x.subarray(n,i));self.DApi.remove_file(s)}function wn(n){var i=x.indexOf(0,n),s=String.fromCharCode.apply(null,x.subarray(n,i));self.alert(s)}function bn(){self.WASM_TRACE&&self.WASM_TRACE.pop()}function An(n){var i=x.indexOf(0,n),s=String.fromCharCode.apply(null,x.subarray(n,i));console.log(s),self.WASM_TRACE=self.WASM_TRACE||[],self.WASM_TRACE.push(s)}Be.push({func:function(){wr()}});var xn=1850912;function Sn(n,i,s,l){L("Assertion failed: "+re(n)+", at: "+[i?re(i):"unknown filename",s,l?re(l):"unknown function"])}function En(n){return vr(n)}var z={},Ke=[];function Je(n){if(n){var i=z[n];i.refcount++}}function Se(n){if(!n||z[n])return n;for(var i in z)for(var s=+i,l=z[s].adjusted,p=l.length,d=0;d<p;d++)if(l[d]===n)return s;return n}function Rn(n){var i=z[n];return i&&!i.caught&&(i.caught=!0,_e.uncaught_exceptions--),i&&(i.rethrown=!1),Ke.push(n),Je(Se(n)),n}var ue=0;function $e(n){try{return gr(n)}catch{}}function Ge(n){if(n){var i=z[n];i.refcount--,i.refcount===0&&!i.rethrown&&(i.destructor&&e.dynCall_vi(i.destructor,n),delete z[n],$e(n))}}function Cn(){T(0);var n=Ke.pop();n&&(Ge(Se(n)),ue=0)}function Tn(n){throw ue||(ue=n),n}function ye(){var n=ue;if(!n)return I(0),0|0;var i=z[n],s=i.type;if(!s)return I(0),n|0;var l=Array.prototype.slice.call(arguments);hr(s);var p=1850880;U[p>>2]=n,n=p;for(var d=0;d<l.length;d++)if(l[d]&&yr(l[d],s,n))return n=U[n>>2],i.adjusted.push(n),I(l[d]),n|0;return n=U[n>>2],I(s),n|0}e.___cxa_find_matching_catch=ye;function kn(n,i){return ye(n,i)}function jn(n,i,s){return ye(n,i,s)}function On(n){return n}function Dn(){throw B=!0,"Pure virtual function called!"}function Pn(n,i,s){throw z[n]={ptr:n,adjusted:[n],type:i,destructor:s,refcount:0,caught:!1,rethrown:!1},ue=n,"uncaught_exception"in _e?_e.uncaught_exceptions++:_e.uncaught_exceptions=1,n}function Nn(){return _e.uncaught_exceptions}function In(){}function Mn(){}var S={buffers:[null,[],[]],printChar:function(n,i){var s=S.buffers[n];i===0||i===10?((n===1?w:D)(ce(s,0)),s.length=0):s.push(i)},varargs:0,get:function(n){S.varargs+=4;var i=U[S.varargs-4>>2];return i},getStr:function(){var n=re(S.get());return n},get64:function(){var n=S.get();return S.get(),n},getZero:function(){S.get()}};function Ln(n,i){S.varargs=i;try{var s=S.getStreamFromFD(),l=S.get(),p=S.get(),d=S.get(),h=S.get();return 0}catch(b){return(typeof FS>"u"||!(b instanceof FS.ErrnoError))&&L(b),-b.errno}}function Fn(){var n=e._fflush;n&&n(0);var i=S.buffers;i[1].length&&S.printChar(1,10),i[2].length&&S.printChar(2,10)}function Un(n,i){S.varargs=i;try{for(var s=S.get(),l=S.get(),p=S.get(),d=0,h=0;h<p;h++){for(var b=U[l+h*8>>2],N=U[l+(h*8+4)>>2],F=0;F<N;F++)S.printChar(s,x[b+F]);d+=N}return d}catch(Re){return(typeof FS>"u"||!(Re instanceof FS.ErrnoError))&&L(Re),-Re.errno}}function Bn(n,i){S.varargs=i;try{return 0}catch(s){return(typeof FS>"u"||!(s instanceof FS.ErrnoError))&&L(s),-s.errno}}function Hn(n,i){S.varargs=i;try{var s=S.getStreamFromFD();return 0}catch(l){return(typeof FS>"u"||!(l instanceof FS.ErrnoError))&&L(l),-l.errno}}function qn(){}function Wn(){e.abort()}function Ye(){return Ne.length}function zn(n){Lr(n)}function Vn(n){return n}function Kn(){L("trap!")}function Jn(n,i,s){x.set(x.subarray(i,i+s),n)}function $n(n){return e.___errno_location&&(U[e.___errno_location()>>2]=n),n}function Gn(n){L("OOM")}function Xe(n){var i=65536;n=xe(n,i);var s=M.byteLength;try{var l=W.grow((n-s)/65536);return l!==-1?(M=W.buffer,!0):!1}catch{return!1}}function Yn(n){var i=Ye(),s=65536,l=2147483648-s;if(n>l)return!1;for(var p=16777216,d=Math.max(i,p);d<n;)d<=536870912?d=xe(2*d,s):d=Math.min(xe((3*d+2147483648)/4,s),l);return Xe(d)?(Me(),!0):!1}function Xn(n){var i=Date.now()/1e3|0;return n&&(U[n>>2]=i),i}function Zn(n){var i=j();try{return br(n)}catch(s){if(k(i),s!==s+0&&s!=="longjmp")throw s;T(1,0)}}function Qn(n,i){var s=j();try{return Ar(n,i)}catch(l){if(k(s),l!==l+0&&l!=="longjmp")throw l;T(1,0)}}function er(n,i,s){var l=j();try{return xr(n,i,s)}catch(p){if(k(l),p!==p+0&&p!=="longjmp")throw p;T(1,0)}}function tr(n,i,s,l){var p=j();try{return Sr(n,i,s,l)}catch(d){if(k(p),d!==d+0&&d!=="longjmp")throw d;T(1,0)}}function nr(n,i,s,l,p){var d=j();try{return Er(n,i,s,l,p)}catch(h){if(k(d),h!==h+0&&h!=="longjmp")throw h;T(1,0)}}function rr(n,i,s,l,p,d){var h=j();try{return Rr(n,i,s,l,p,d)}catch(b){if(k(h),b!==b+0&&b!=="longjmp")throw b;T(1,0)}}function ir(n,i){var s=j();try{return Cr(n,i)}catch(l){if(k(s),l!==l+0&&l!=="longjmp")throw l;T(1,0)}}function ar(n){var i=j();try{Tr(n)}catch(s){if(k(i),s!==s+0&&s!=="longjmp")throw s;T(1,0)}}function sr(n,i){var s=j();try{kr(n,i)}catch(l){if(k(s),l!==l+0&&l!=="longjmp")throw l;T(1,0)}}function or(n,i,s){var l=j();try{jr(n,i,s)}catch(p){if(k(l),p!==p+0&&p!=="longjmp")throw p;T(1,0)}}function ur(n,i,s,l){var p=j();try{Or(n,i,s,l)}catch(d){if(k(p),d!==d+0&&d!=="longjmp")throw d;T(1,0)}}function _r(n,i,s,l,p){var d=j();try{Dr(n,i,s,l,p)}catch(h){if(k(d),h!==h+0&&h!=="longjmp")throw h;T(1,0)}}function lr(n,i,s,l,p,d){var h=j();try{Pr(n,i,s,l,p,d)}catch(b){if(k(h),b!==b+0&&b!=="longjmp")throw b;T(1,0)}}function cr(n,i,s,l,p,d,h,b){var N=j();try{Nr(n,i,s,l,p,d,h,b)}catch(F){if(k(N),F!==F+0&&F!=="longjmp")throw F;T(1,0)}}function fr(n,i,s,l,p){var d=j();try{Ir(n,i,s,l,p)}catch(h){if(k(d),h!==h+0&&h!=="longjmp")throw h;T(1,0)}}function pr(n,i,s,l,p){var d=j();try{Mr(n,i,s,l,p)}catch(h){if(k(d),h!==h+0&&h!=="longjmp")throw h;T(1,0)}}var dr={},mr={abort:L,setTempRet0:I,getTempRet0:ee,invoke_i:Zn,invoke_ii:Qn,invoke_iii:er,invoke_iiii:tr,invoke_iiiii:nr,invoke_iiiiii:rr,invoke_ji:ir,invoke_v:ar,invoke_vi:sr,invoke_vii:or,invoke_viii:ur,invoke_viiii:_r,invoke_viiiii:lr,invoke_viiiiiii:cr,invoke_viij:fr,invoke_viji:pr,___assert_fail:Sn,___cxa_allocate_exception:En,___cxa_begin_catch:Rn,___cxa_end_catch:Cn,___cxa_find_matching_catch:ye,___cxa_find_matching_catch_2:kn,___cxa_find_matching_catch_3:jn,___cxa_free_exception:$e,___cxa_get_exception_ptr:On,___cxa_pure_virtual:Dn,___cxa_throw:Pn,___cxa_uncaught_exceptions:Nn,___exception_addRef:Je,___exception_deAdjust:Se,___exception_decRef:Ge,___gxx_personality_v0:In,___lock:Mn,___resumeException:Tn,___setErrNo:$n,___syscall140:Ln,___syscall146:Un,___syscall54:Bn,___syscall6:Hn,___unlock:qn,__api_close_keyboard:$t,__api_open_keyboard:Gt,_abort:Wn,_api_create_sound:Yt,_api_create_sound_float:Xt,_api_delete_sound:Zt,_api_draw_begin:Qt,_api_draw_belt:en,_api_draw_blit:tn,_api_draw_clip_text:nn,_api_draw_end:rn,_api_draw_text:an,_api_duplicate_sound:sn,_api_exit_game:on,_api_play_sound:un,_api_set_cursor:_n,_api_set_volume:ln,_api_stop_sound:cn,_api_use_websocket:fn,_api_websocket_closed:pn,_api_websocket_send:dn,_emscripten_asm_const_ii:Jt,_emscripten_get_heap_size:Ye,_emscripten_memcpy_big:Jn,_emscripten_resize_heap:Yn,_exit:zn,_exit_error:mn,_get_file_contents:yn,_get_file_size:hn,_llvm_eh_typeid_for:Vn,_llvm_trap:Kn,_put_file_contents:gn,_remove_file:vn,_show_alert:wn,_time:Xn,_trace_pop:bn,_trace_push:An,abortOnCannotGrowMemory:Gn,emscripten_realloc_buffer:Xe,flush_NO_FILESYSTEM:Fn,tempDoublePtr:xn,DYNAMICTOP_PTR:Le},Ze=e.asm(dr,mr,M);e.asm=Ze,e._DApi_AllocPacket=function(){return e.asm._DApi_AllocPacket.apply(null,arguments)},e._DApi_Char=function(){return e.asm._DApi_Char.apply(null,arguments)},e._DApi_Init=function(){return e.asm._DApi_Init.apply(null,arguments)},e._DApi_Key=function(){return e.asm._DApi_Key.apply(null,arguments)},e._DApi_Mouse=function(){return e.asm._DApi_Mouse.apply(null,arguments)},e._DApi_Render=function(){return e.asm._DApi_Render.apply(null,arguments)},e._DApi_SyncText=function(){return e.asm._DApi_SyncText.apply(null,arguments)},e._DApi_SyncTextPtr=function(){return e.asm._DApi_SyncTextPtr.apply(null,arguments)},e._SNet_InitWebsocket=function(){return e.asm._SNet_InitWebsocket.apply(null,arguments)},e._SNet_WebsocketStatus=function(){return e.asm._SNet_WebsocketStatus.apply(null,arguments)};var _e=e.__ZSt18uncaught_exceptionv=function(){return e.asm.__ZSt18uncaught_exceptionv.apply(null,arguments)},yr=e.___cxa_can_catch=function(){return e.asm.___cxa_can_catch.apply(null,arguments)},hr=e.___cxa_is_pointer_type=function(){return e.asm.___cxa_is_pointer_type.apply(null,arguments)};e.___em_js___api_close_keyboard=function(){return e.asm.___em_js___api_close_keyboard.apply(null,arguments)},e.___em_js___api_open_keyboard=function(){return e.asm.___em_js___api_open_keyboard.apply(null,arguments)},e.___em_js__api_create_sound=function(){return e.asm.___em_js__api_create_sound.apply(null,arguments)},e.___em_js__api_create_sound_float=function(){return e.asm.___em_js__api_create_sound_float.apply(null,arguments)},e.___em_js__api_delete_sound=function(){return e.asm.___em_js__api_delete_sound.apply(null,arguments)},e.___em_js__api_draw_begin=function(){return e.asm.___em_js__api_draw_begin.apply(null,arguments)},e.___em_js__api_draw_belt=function(){return e.asm.___em_js__api_draw_belt.apply(null,arguments)},e.___em_js__api_draw_blit=function(){return e.asm.___em_js__api_draw_blit.apply(null,arguments)},e.___em_js__api_draw_clip_text=function(){return e.asm.___em_js__api_draw_clip_text.apply(null,arguments)},e.___em_js__api_draw_end=function(){return e.asm.___em_js__api_draw_end.apply(null,arguments)},e.___em_js__api_draw_text=function(){return e.asm.___em_js__api_draw_text.apply(null,arguments)},e.___em_js__api_duplicate_sound=function(){return e.asm.___em_js__api_duplicate_sound.apply(null,arguments)},e.___em_js__api_exit_game=function(){return e.asm.___em_js__api_exit_game.apply(null,arguments)},e.___em_js__api_play_sound=function(){return e.asm.___em_js__api_play_sound.apply(null,arguments)},e.___em_js__api_set_cursor=function(){return e.asm.___em_js__api_set_cursor.apply(null,arguments)},e.___em_js__api_set_volume=function(){return e.asm.___em_js__api_set_volume.apply(null,arguments)},e.___em_js__api_stop_sound=function(){return e.asm.___em_js__api_stop_sound.apply(null,arguments)},e.___em_js__api_use_websocket=function(){return e.asm.___em_js__api_use_websocket.apply(null,arguments)},e.___em_js__api_websocket_closed=function(){return e.asm.___em_js__api_websocket_closed.apply(null,arguments)},e.___em_js__api_websocket_send=function(){return e.asm.___em_js__api_websocket_send.apply(null,arguments)},e.___em_js__exit_error=function(){return e.asm.___em_js__exit_error.apply(null,arguments)},e.___em_js__get_file_contents=function(){return e.asm.___em_js__get_file_contents.apply(null,arguments)},e.___em_js__get_file_size=function(){return e.asm.___em_js__get_file_size.apply(null,arguments)},e.___em_js__put_file_contents=function(){return e.asm.___em_js__put_file_contents.apply(null,arguments)},e.___em_js__remove_file=function(){return e.asm.___em_js__remove_file.apply(null,arguments)},e.___em_js__show_alert=function(){return e.asm.___em_js__show_alert.apply(null,arguments)},e.___em_js__trace_pop=function(){return e.asm.___em_js__trace_pop.apply(null,arguments)},e.___em_js__trace_push=function(){return e.asm.___em_js__trace_push.apply(null,arguments)},e._emscripten_replace_memory=function(){return e.asm._emscripten_replace_memory.apply(null,arguments)};var gr=e._free=function(){return e.asm._free.apply(null,arguments)};e._llvm_bswap_i32=function(){return e.asm._llvm_bswap_i32.apply(null,arguments)};var vr=e._malloc=function(){return e.asm._malloc.apply(null,arguments)};e._memcpy=function(){return e.asm._memcpy.apply(null,arguments)},e._memmove=function(){return e.asm._memmove.apply(null,arguments)},e._memset=function(){return e.asm._memset.apply(null,arguments)},e._sbrk=function(){return e.asm._sbrk.apply(null,arguments)};var T=e._setThrew=function(){return e.asm._setThrew.apply(null,arguments)};e.establishStackSpace=function(){return e.asm.establishStackSpace.apply(null,arguments)};var wr=e.globalCtors=function(){return e.asm.globalCtors.apply(null,arguments)};e.stackAlloc=function(){return e.asm.stackAlloc.apply(null,arguments)};var k=e.stackRestore=function(){return e.asm.stackRestore.apply(null,arguments)},j=e.stackSave=function(){return e.asm.stackSave.apply(null,arguments)},br=e.dynCall_i=function(){return e.asm.dynCall_i.apply(null,arguments)},Ar=e.dynCall_ii=function(){return e.asm.dynCall_ii.apply(null,arguments)};e.dynCall_iidiiii=function(){return e.asm.dynCall_iidiiii.apply(null,arguments)};var xr=e.dynCall_iii=function(){return e.asm.dynCall_iii.apply(null,arguments)},Sr=e.dynCall_iiii=function(){return e.asm.dynCall_iiii.apply(null,arguments)},Er=e.dynCall_iiiii=function(){return e.asm.dynCall_iiiii.apply(null,arguments)},Rr=e.dynCall_iiiiii=function(){return e.asm.dynCall_iiiiii.apply(null,arguments)},Cr=e.dynCall_ji=function(){return e.asm.dynCall_ji.apply(null,arguments)};e.dynCall_jiji=function(){return e.asm.dynCall_jiji.apply(null,arguments)};var Tr=e.dynCall_v=function(){return e.asm.dynCall_v.apply(null,arguments)},kr=e.dynCall_vi=function(){return e.asm.dynCall_vi.apply(null,arguments)},jr=e.dynCall_vii=function(){return e.asm.dynCall_vii.apply(null,arguments)},Or=e.dynCall_viii=function(){return e.asm.dynCall_viii.apply(null,arguments)},Dr=e.dynCall_viiii=function(){return e.asm.dynCall_viiii.apply(null,arguments)},Pr=e.dynCall_viiiii=function(){return e.asm.dynCall_viiiii.apply(null,arguments)};e.dynCall_viiiiii=function(){return e.asm.dynCall_viiiiii.apply(null,arguments)};var Nr=e.dynCall_viiiiiii=function(){return e.asm.dynCall_viiiiiii.apply(null,arguments)};e.dynCall_viiiiiiiii=function(){return e.asm.dynCall_viiiiiiiii.apply(null,arguments)},e.dynCall_viiiiiiiiii=function(){return e.asm.dynCall_viiiiiiiiii.apply(null,arguments)};var Ir=e.dynCall_viij=function(){return e.asm.dynCall_viij.apply(null,arguments)},Mr=e.dynCall_viji=function(){return e.asm.dynCall_viji.apply(null,arguments)};e.asm=Ze,e.then=function(n){if(e.calledRun)n(e);else{var i=e.onRuntimeInitialized;e.onRuntimeInitialized=function(){i&&i(),n(e)}}return e};function le(n){this.name="ExitStatus",this.message="Program terminated with exit("+n+")",this.status=n}le.prototype=new Error,le.prototype.constructor=le,oe=function n(){e.calledRun||Ee(),e.calledRun||(oe=n)};function Ee(n){if(n=n||e.arguments,Y>0||(Lt(),Y>0)||e.calledRun)return;function i(){e.calledRun||(e.calledRun=!0,!B&&(Ft(),Ut(),e.onRuntimeInitialized&&e.onRuntimeInitialized(),Bt()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),i()},1)):i()}e.run=Ee;function Lr(n,i){e.noExitRuntime||(B=!0,e.onExit&&e.onExit(n)),e.quit(n,new le(n))}function L(n){throw e.onAbort&&e.onAbort(n),n+="",w(n),D(n),B=!0,"abort("+n+"). Build with -s ASSERTIONS=1 for more info."}if(e.abort=L,e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return e.noExitRuntime=!0,Ee(),e.ready=new Promise(function(n,i){delete e.then,e.onAbort=function(s){i(s)},qe(function(){n(e)})}),r}}();typeof exports=="object"&&typeof module=="object"?module.exports=_t:typeof define=="function"&&define.amd?define([],function(){return _t}):typeof exports=="object"&&(exports.DiabloSpawn=_t);async function Qa(t,r){const e=new WebSocket(t);e.binaryType="arraybuffer";let a=null;e.addEventListener("message",({data:_})=>{a&&a(_),r(_)}),await new Promise((_,c)=>{const g=()=>c(1);e.addEventListener("error",g),e.addEventListener("open",()=>{e.removeEventListener("error",g),_()})}),await new Promise((_,c)=>{const g=setTimeout(()=>{a=null,c(1)},5e3);a=y=>{clearTimeout(g);const m=new Uint8Array(y);m[0]===50&&(a=null,(m[1]|m[2]<<8|m[3]<<16|m[4]<<24)===1?_():c(2))}});const o="1.0.0".match(/(\d+)\.(\d+)\.(\d+)/),u=new Uint8Array(5);return u[0]=49,u[1]=parseInt(o[3]),u[2]=parseInt(o[2]),u[3]=parseInt(o[1]),u[4]=0,e.send(u),e}function es(t,r,e){let a=null,o=[],u=null;const _={get readyState(){return a?a.readyState:0},send(c){o.push(c.slice())},close(){u&&(clearInterval(u),u=null),a?a.close():o=null}};return Qa(t,r).then(c=>{a=c,o?u=setInterval(()=>{if(!o.length)return;const g=o.reduce((v,C)=>v+C.byteLength,3),y=new Uint8Array(g);y[0]=0,y[1]=o.length&255,y[2]=o.length>>8;let m=3;for(const v of o)y.set(v,m),m+=v.byteLength;a==null||a.send(y),o.length=0},100):a.close(),e(0)},c=>{e(c)}),_}const ts=1466809,ns=1337416,q=self;let lt=null,$=null,ct=null,G=null,V=null,ge=null,Ai=!1,ae=null;function xi(t,r="error"){t instanceof Error?q.postMessage({action:r,error:t.toString(),stack:t.stack}):q.postMessage({action:r,error:t.toString()})}const se=1<<20;class rs{constructor(r){const e=new XMLHttpRequest;if(e.open("HEAD",r,!1),e.send(),e.status<200||e.status>=300)throw Error("Failed to load remote file");this.byteLength=parseInt(e.getResponseHeader("Content-Length")||"0"),this.url=r,this.buffer=new Uint8Array(this.byteLength),this.chunks=new Uint8Array(this.byteLength+se-1>>20|0)}subarray(r,e){let a=r/se|0,o=(e+se-1)/se|0,u=o,_=a;for(let c=a;c<o;++c)this.chunks[c]||(u=Math.min(u,c),_=Math.max(_,c));if(u<=_){const c=new XMLHttpRequest;if(c.open("GET",this.url,!1),c.setRequestHeader("Range",`bytes=${u*se}-${Math.min(_*se+se-1,this.byteLength-1)}`),c.responseType="arraybuffer",c.send(),c.status<200||c.status>=300)throw Error("Failed to load remote file");{const g=c.getResponseHeader("Content-Range");let y,m=0;g&&(y=g.match(/bytes (\d+)-(\d+)\/(\d+)/))&&(m=parseInt(y[1])),this.buffer.set(new Uint8Array(c.response),m),a=(m+se-1)/se|0,o=(m+c.response.byteLength+se-1)/se|0;for(let v=a;v<o;++v)this.chunks[v]=1}}return this.buffer.subarray(r,e)}}const ke={exit_error(t){throw Error(t)},exit_game(){q.postMessage({action:"exit"})},current_save_id(t){q.postMessage({action:"current_save",name:t>=0?Ai?`spawn${t}.sv`:`single_${t}.sv`:null})},get_file_size(t){const r=G==null?void 0:G.get(t.toLowerCase());return r?r.byteLength:0},get_file_contents(t,r,e){const a=G==null?void 0:G.get(t.toLowerCase());a&&r.set(a.subarray(e,e+r.byteLength))},put_file_contents(t,r){t=t.toLowerCase(),G==null||G.set(t,r),q.postMessage({action:"fs",func:"update",params:[t,r]})},remove_file(t){t=t.toLowerCase(),G==null||G.delete(t),q.postMessage({action:"fs",func:"delete",params:[t]})},set_cursor(t,r){q.postMessage({action:"cursor",x:t,y:r})},open_keyboard(...t){q.postMessage({action:"keyboard",rect:[...t]})},close_keyboard(){q.postMessage({action:"keyboard",rect:null})},use_websocket(t){if(t)if(!ae||ae.readyState!==1){const r=ae=es("wss://diablo.rivsoft.net/websocket",e=>{ae===r&&pt(()=>{const a=te._DApi_AllocPacket(e.byteLength);te.HEAPU8.set(new Uint8Array(e),a)})},e=>{if(typeof e!="number")throw e;dt("SNet_WebsocketStatus",e)})}else dt("SNet_WebsocketStatus",0);else ae&&ae.close(),ae=null},websocket_closed(){return ae?ae.readyState!==1:!1}},is={draw_begin(){V={images:[],text:[],clip:null,belt:ge},ge=null},draw_blit(t,r,e,a,o){V==null||V.images.push({x:t,y:r,w:e,h:a,data:o.slice()})},draw_clip_text(t,r,e,a){V.clip={x0:t,y0:r,x1:e,y1:a}},draw_text(t,r,e,a){V==null||V.text.push({x:t,y:r,text:e,color:a})},draw_end(){const t=V==null?void 0:V.images.map(({data:r})=>r.buffer);V!=null&&V.belt&&(t==null||t.push(V.belt.buffer)),q.postMessage({action:"render",batch:V},t),V=null},draw_belt(t){ge=t.slice()}},as={draw_begin(){$&&($.save(),$.font="bold 13px Times New Roman")},draw_blit(t,r,e,a,o){$&&ct&&(ct.data.set(o),$.putImageData(ct,t,r))},draw_clip_text(t,r,e,a){$&&($.beginPath(),$.rect(t,r,e-t,a-r),$.clip())},draw_text(t,r,e,a){if($){const o=a>>16&255,u=a>>8&255,_=a&255;$.fillStyle=`rgb(${o}, ${u}, ${_})`,$.fillText(e,t,r+22)}},draw_end(){if($&&lt){$.restore();const t=lt.transferToImageBitmap(),r=[t];ge&&r.push(ge.buffer),q.postMessage({action:"render",batch:{bitmap:t,belt:ge}},r),ge=null}},draw_belt(t){ge=t.slice()}};let fe=null,ft=null,Dt=0,Si=0;["create_sound_raw","create_sound","duplicate_sound"].forEach(t=>{ke[t]=function(...r){if(fe)Si=r[0]+1,fe.push({func:t,params:r}),t!=="duplicate_sound"&&ft.push(r[1].buffer);else{Dt=r[0]+1;const e=[];t!=="duplicate_sound"&&e.push(r[1].buffer),q.postMessage({action:"audio",func:t,params:r},e)}}}),["play_sound","set_volume","stop_sound","delete_sound"].forEach(t=>{ke[t]=function(...r){fe&&r[0]>=Dt?fe.push({func:t,params:r}):q.postMessage({action:"audio",func:t,params:r})}});let Ae=null;ke.websocket_send=function(t){ae?ae.send(t):Ae?Ae.push(t.slice().buffer):q.postMessage({action:"packet",buffer:t})},q.DApi=ke;let te=null;function pt(t){try{t()}catch(r){xi(r)}}function dt(t,...r){pt(()=>{const e=fe!=null;if(e||(fe=[],ft=[],Ae=[]),t!=="text")te["_"+t](...r);else{const a=te._DApi_SyncTextPtr(),o=r[0],u=Math.min(o.length,255),_=te.HEAPU8;for(let c=0;c<u;++c)_[a+c]=o.charCodeAt(c);_[a+u]=0,te._DApi_SyncText(r[1])}e||(fe.length&&(Dt=Si,q.postMessage({action:"audioBatch",batch:fe},ft)),Ae.length&&q.postMessage({action:"packetBatch",batch:Ae},Ae),fe=null,ft=null,Ae=null)})}function Pt(t,r,e){q.postMessage({action:"progress",text:t,loaded:r,total:e})}const ss=(t,r)=>new Promise((e,a)=>{const o=new FileReader;o.onload=()=>{r&&r({loaded:t.size}),e(o.result)},o.onerror=()=>a(o.error),o.onabort=()=>a(),r&&o.addEventListener("progress",r),o.readAsArrayBuffer(t)});async function os(t,r){const e=await H.request({url:t?Za:Xa,responseType:"arraybuffer",onDownloadProgress:r}),a=await(t?_t:ut)({wasmBinary:e.data}).ready;return r({loaded:2e6}),a}async function us(t,r,e){if(Ai=r,e?(lt=new OffscreenCanvas(640,480),$=lt.getContext("2d"),ct=$.createImageData(640,480),Object.assign(ke,as)):Object.assign(ke,is),!t){const C=r?"spawn.mpq":"diabdat.mpq";G.has(C)||G.set(C,new rs(`undefined/${C}`))}Pt("Loading...");let a=0;const o=t?t.size:0;let u=0;const _=r?ns:ts,c=5;function g(){Pt("Loading...",a+u*c,o+_*c)}const y=os(r,C=>{u=Math.min(C.loaded,_),g()}),m=t?ss(t,C=>{a=C.loaded,g()}):Promise.resolve(null);[te,t]=await Promise.all([y,m]),t&&G.set(r?"spawn.mpq":"diabdat.mpq",new Uint8Array(t)),Pt("Initializing...");const v="1.0.0".match(/(\d+)\.(\d+)\.(\d+)/);te._DApi_Init(Math.floor(performance.now()),e?1:0,parseInt(v[1]),parseInt(v[2]),parseInt(v[3])),setInterval(()=>{dt("DApi_Render",Math.floor(performance.now()))},50)}q.addEventListener("message",({data:t})=>{switch(t.action){case"init":G=t.files,us(t.mpq,t.spawn,t.offscreen).then(()=>q.postMessage({action:"loaded"}),r=>xi(r,"failed"));break;case"event":dt(t.func,...t.params);break;case"packet":pt(()=>{const r=te._DApi_AllocPacket(t.buffer.byteLength);te.HEAPU8.set(new Uint8Array(t.buffer),r)});break;case"packetBatch":pt(()=>{for(const r of t.batch){const e=te._DApi_AllocPacket(r.byteLength);te.HEAPU8.set(new Uint8Array(r),e)}});break}})})();
